"use strict";$.fn.qorSliderAfterShow=$.fn.qorSliderAfterShow||{},window.Mustache.tags=["[[","]]"],$(document).ajaxComplete(function(t,e,i){"POST"!=i.type&&"PUT"!=i.type||$.fn.qorSlideoutBeforeHide&&($.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)}),$.fn.select2.ajaxCommonOptions={dataType:"json",cache:!0,delay:250,data:function(t){return{keyword:t.term,page:t.page,per_page:20}},processResults:function(t,e){e.page=e.page||1;var i=$.map(t,function(t){return t.id=t.Id||t.ID,t});return{results:i,pagination:{more:i.length>=20}}}},$.fn.select2.ajaxFormatResult=function(t,e){var i="";return i=e.length>0?window.Mustache.render(e.html().replace(/{{(.*?)}}/g,"[[$1]]"),t):t.text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],/<(.*)(\/>|<\/.+>)/.test(i)?$(i):i};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define("datepicker",["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t){return O.call(t).slice(8,-1).toLowerCase()}function i(t){return"string"==typeof t}function n(t){return"number"==typeof t&&!isNaN(t)}function o(t){return"undefined"==typeof t}function s(t){return"date"===e(t)}function r(t,e){var i=[];return Array.from?Array.from(t).slice(e||0):(n(e)&&i.push(e),i.slice.apply(t,i))}function a(t,e){var i=r(arguments,2);return function(){return t.apply(e,i.concat(r(arguments)))}}function l(t){return t%4===0&&t%100!==0||t%400===0}function d(t,e){return[31,l(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function c(t){var e,i,n=String(t).toLowerCase(),o=n.match($);if(!o||0===o.length)throw new Error("Invalid date format.");for(t={source:n,parts:o},e=o.length,i=0;i<e;i++)switch(o[i]){case"dd":case"d":t.hasDay=!0;break;case"mm":case"m":t.hasMonth=!0;break;case"yyyy":case"yy":t.hasYear=!0}return t}function h(e,i){i=t.isPlainObject(i)?i:{},i.language&&(i=t.extend({},h.LANGUAGES[i.language],i)),this.$element=t(e),this.options=t.extend({},h.DEFAULTS,i),this.isBuilt=!1,this.isShown=!1,this.isInput=!1,this.isInline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}var u=t(window),f=window.document,p=t(f),m=window.Number,y="datepicker",b="click."+y,g="keyup."+y,v="focus."+y,_="resize."+y,w="show."+y,q="hide."+y,S="pick."+y,$=/(y|m|d)+/g,k=/\d+/g,x=/^\d{2,4}$/,D=y+"-inline",C=y+"-dropdown",T=y+"-top-left",j=y+"-top-right",E=y+"-bottom-left",L=y+"-bottom-right",A=[T,j,E,L].join(" "),F=y+"-hide",I=Math.min,O=Object.prototype.toString;h.prototype={constructor:h,init:function(){var e=this.options,i=this.$element,n=e.startDate,o=e.endDate,s=e.date;this.$trigger=t(e.trigger||i),this.isInput=i.is("input")||i.is("textarea"),this.isInline=e.inline&&(e.container||!this.isInput),this.format=c(e.format),this.initialValue=this.getValue(),s=this.parseDate(s||this.initialValue),n&&(n=this.parseDate(n),s.getTime()<n.getTime()&&(s=new Date(n)),this.startDate=n),o&&(o=this.parseDate(o),n&&o.getTime()<n.getTime()&&(o=new Date(n)),s.getTime()>o.getTime()&&(s=new Date(o)),this.endDate=o),this.date=s,this.viewDate=new Date(s),this.initialDate=new Date(this.date),this.bind(),(e.autoshow||this.isInline)&&this.show(),e.autopick&&this.pick()},build:function(){var e,i=this.options,n=this.$element;this.isBuilt||(this.isBuilt=!0,this.$picker=e=t(i.template),this.$week=e.find('[data-view="week"]'),this.$yearsPicker=e.find('[data-view="years picker"]'),this.$yearsPrev=e.find('[data-view="years prev"]'),this.$yearsNext=e.find('[data-view="years next"]'),this.$yearsCurrent=e.find('[data-view="years current"]'),this.$years=e.find('[data-view="years"]'),this.$monthsPicker=e.find('[data-view="months picker"]'),this.$yearPrev=e.find('[data-view="year prev"]'),this.$yearNext=e.find('[data-view="year next"]'),this.$yearCurrent=e.find('[data-view="year current"]'),this.$months=e.find('[data-view="months"]'),this.$daysPicker=e.find('[data-view="days picker"]'),this.$monthPrev=e.find('[data-view="month prev"]'),this.$monthNext=e.find('[data-view="month next"]'),this.$monthCurrent=e.find('[data-view="month current"]'),this.$days=e.find('[data-view="days"]'),this.isInline?t(i.container||n).append(e.addClass(D)):(t(f.body).append(e.addClass(C)),e.addClass(F)),this.fillWeek())},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$picker.remove())},bind:function(){var e=this.options,i=this.$element;t.isFunction(e.show)&&i.on(w,e.show),t.isFunction(e.hide)&&i.on(q,e.hide),t.isFunction(e.pick)&&i.on(S,e.pick),this.isInput&&(i.on(g,t.proxy(this.keyup,this)),e.trigger||i.on(v,t.proxy(this.show,this))),this.$trigger.on(b,t.proxy(this.show,this))},unbind:function(){var e=this.options,i=this.$element;t.isFunction(e.show)&&i.off(w,e.show),t.isFunction(e.hide)&&i.off(q,e.hide),t.isFunction(e.pick)&&i.off(S,e.pick),this.isInput&&(i.off(g,this.keyup),e.trigger||i.off(v,this.show)),this.$trigger.off(b,this.show)},showView:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,n=this.$daysPicker,o=this.format;if(o.hasYear||o.hasMonth||o.hasDay)switch(m(t)){case 2:case"years":i.addClass(F),n.addClass(F),o.hasYear?(this.fillYears(),e.removeClass(F)):this.showView(0);break;case 1:case"months":e.addClass(F),n.addClass(F),o.hasMonth?(this.fillMonths(),i.removeClass(F)):this.showView(2);break;default:e.addClass(F),i.addClass(F),o.hasDay?(this.fillDays(),n.removeClass(F)):this.showView(1)}},hideView:function(){this.options.autohide&&this.hide()},place:function(){var t=this.options,e=this.$element,i=this.$picker,n=p.outerWidth(),o=p.outerHeight(),s=e.outerWidth(),r=e.outerHeight(),a=i.width(),l=i.height(),d=e.offset(),c=d.left,h=d.top,u=parseFloat(t.offset)||10,f=T;h>l&&h+r+l>o?(h-=l+u,f=E):h+=r+u,c+a>n&&(c=c+s-a,f=f.replace("left","right")),i.removeClass(A).addClass(f).css({top:h,left:c,zIndex:parseInt(t.zIndex,10)})},trigger:function(e,i){var n=t.Event(e,i);return this.$element.trigger(n),n},createItem:function(e){var i=this.options,n=i.itemTag,o={text:"",view:"",muted:!1,picked:!1,disabled:!1};return t.extend(o,e),"<"+n+" "+(o.disabled?'class="'+i.disabledClass+'"':o.picked?'class="'+i.pickedClass+'"':o.muted?'class="'+i.mutedClass+'"':"")+(o.view?' data-view="'+o.view+'"':"")+">"+o.text+"</"+n+">"},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillWeek:function(){var e,i=this.options,n=parseInt(i.weekStart,10)%7,o=i.daysMin,s="";for(o=t.merge(o.slice(n),o.slice(0,n)),e=0;e<=6;e++)s+=this.createItem({text:o[e]});this.$week.html(s)},fillYears:function(){var e,i=this.options,n=i.disabledClass||"",o=i.yearSuffix||"",s=t.isFunction(i.filter)&&i.filter,r=this.startDate,a=this.endDate,l=this.viewDate,d=l.getFullYear(),c=l.getMonth(),h=l.getDate(),u=this.date,f=u.getFullYear(),p=!1,m=!1,y=!1,b=!1,g=!1,v="",_=-5,w=6;for(e=_;e<=w;e++)u=new Date(d+e,c,h),g=e===_||e===w,b=d+e===f,y=!1,r&&(y=u.getFullYear()<r.getFullYear(),e===_&&(p=y)),!y&&a&&(y=u.getFullYear()>a.getFullYear(),e===w&&(m=y)),!y&&s&&(y=s.call(this.$element,u)===!1),v+=this.createItem({text:d+e,view:y?"year disabled":b?"year picked":"year",muted:g,picked:b,disabled:y});this.$yearsPrev.toggleClass(n,p),this.$yearsNext.toggleClass(n,m),this.$yearsCurrent.toggleClass(n,!0).html(d+_+o+" - "+(d+w)+o),this.$years.html(v)},fillMonths:function(){var e,i=this.options,n=i.disabledClass||"",o=i.monthsShort,s=t.isFunction(i.filter)&&i.filter,r=this.startDate,a=this.endDate,l=this.viewDate,d=l.getFullYear(),c=l.getDate(),h=this.date,u=h.getFullYear(),f=h.getMonth(),p=!1,m=!1,y=!1,b=!1,g="";for(e=0;e<=11;e++)h=new Date(d,e,c),b=d===u&&e===f,y=!1,r&&(p=h.getFullYear()===r.getFullYear(),y=p&&h.getMonth()<r.getMonth()),!y&&a&&(m=h.getFullYear()===a.getFullYear(),y=m&&h.getMonth()>a.getMonth()),!y&&s&&(y=s.call(this.$element,h)===!1),g+=this.createItem({index:e,text:o[e],view:y?"month disabled":b?"month picked":"month",picked:b,disabled:y});this.$yearPrev.toggleClass(n,p),this.$yearNext.toggleClass(n,m),this.$yearCurrent.toggleClass(n,p&&m).html(d+i.yearSuffix||""),this.$months.html(g)},fillDays:function(){var e,i,n,o=this.options,s=o.disabledClass||"",r=o.yearSuffix||"",a=o.monthsShort,l=parseInt(o.weekStart,10)%7,c=t.isFunction(o.filter)&&o.filter,h=this.startDate,u=this.endDate,f=this.viewDate,p=f.getFullYear(),m=f.getMonth(),y=p,b=m,g=p,v=m,_=this.date,w=_.getFullYear(),q=_.getMonth(),S=_.getDate(),$=!1,k=!1,x=!1,D=!1,C=[],T=[],j=[],E=42;for(0===m?(y-=1,b=11):b-=1,e=d(y,b),_=new Date(p,m,1),n=_.getDay()-l,n<=0&&(n+=7),h&&($=_.getTime()<=h.getTime()),i=e-(n-1);i<=e;i++)_=new Date(y,b,i),x=!1,h&&(x=_.getTime()<h.getTime()),!x&&c&&(x=c.call(this.$element,_)===!1),C.push(this.createItem({text:i,view:"day prev",muted:!0,disabled:x}));for(11===m?(g+=1,v=0):v+=1,e=d(p,m),n=E-(C.length+e),_=new Date(p,m,e),u&&(k=_.getTime()>=u.getTime()),i=1;i<=n;i++)_=new Date(g,v,i),x=!1,u&&(x=_.getTime()>u.getTime()),!x&&c&&(x=c.call(this.$element,_)===!1),T.push(this.createItem({text:i,view:"day next",muted:!0,disabled:x}));for(i=1;i<=e;i++)_=new Date(p,m,i),D=p===w&&m===q&&i===S,x=!1,h&&(x=_.getTime()<h.getTime()),!x&&u&&(x=_.getTime()>u.getTime()),!x&&c&&(x=c.call(this.$element,_)===!1),j.push(this.createItem({text:i,view:x?"day disabled":D?"day picked":"day",picked:D,disabled:x}));this.$monthPrev.toggleClass(s,$),this.$monthNext.toggleClass(s,k),this.$monthCurrent.toggleClass(s,$&&k).html(o.yearFirst?p+r+" "+a[m]:a[m]+" "+p+r),this.$days.html(C.join("")+j.join(" ")+T.join(""))},click:function(e){var i,n,o,s,r,a,l=t(e.target),d=this.viewDate;if(e.stopPropagation(),e.preventDefault(),!l.hasClass("disabled"))switch(i=d.getFullYear(),n=d.getMonth(),o=d.getDate(),a=l.data("view")){case"years prev":case"years next":i="years prev"===a?i-10:i+10,r=l.text(),s=x.test(r),s&&(i=parseInt(r,10),this.date=new Date(i,n,I(o,28))),this.viewDate=new Date(i,n,I(o,28)),this.fillYears(),s&&(this.showView(1),this.pick("year"));break;case"year prev":case"year next":i="year prev"===a?i-1:i+1,this.viewDate=new Date(i,n,I(o,28)),this.fillMonths();break;case"year current":this.format.hasYear&&this.showView(2);break;case"year picked":this.format.hasMonth?this.showView(1):this.hideView();break;case"year":i=parseInt(l.text(),10),this.date=new Date(i,n,I(o,28)),this.viewDate=new Date(i,n,I(o,28)),this.format.hasMonth?this.showView(1):this.hideView(),this.pick("year");break;case"month prev":case"month next":n="month prev"===a?n-1:"month next"===a?n+1:n,this.viewDate=new Date(i,n,I(o,28)),this.fillDays();break;case"month current":this.format.hasMonth&&this.showView(1);break;case"month picked":this.format.hasDay?this.showView(0):this.hideView();break;case"month":n=t.inArray(l.text(),this.options.monthsShort),this.date=new Date(i,n,I(o,28)),this.viewDate=new Date(i,n,I(o,28)),this.format.hasDay?this.showView(0):this.hideView(),this.pick("month");break;case"day prev":case"day next":case"day":n="day prev"===a?n-1:"day next"===a?n+1:n,o=parseInt(l.text(),10),this.date=new Date(i,n,o),this.viewDate=new Date(i,n,o),this.fillDays(),"day"===a&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}},clickDoc:function(t){for(var e,i=t.target,n=this.$trigger[0];i!==f;){if(i===n){e=!0;break}i=i.parentNode}e||this.hide()},keyup:function(){this.update()},getValue:function(){var t=this.$element,e="";return this.isInput?e=t.val():this.isInline?this.options.container&&(e=t.text()):e=t.text(),e},setValue:function(t){var e=this.$element;t=i(t)?t:"",this.isInput?e.val(t):this.isInline?this.options.container&&e.text(t):e.text(t)},show:function(){this.isBuilt||this.build(),this.isShown||this.trigger(w).isDefaultPrevented()||(this.isShown=!0,this.$picker.removeClass(F).on(b,t.proxy(this.click,this)),this.showView(this.options.startView),this.isInline||(u.on(_,this._place=a(this.place,this)),p.on(b,this._clickDoc=a(this.clickDoc,this)),this.place()))},hide:function(){this.isShown&&(this.trigger(q).isDefaultPrevented()||(this.isShown=!1,this.$picker.addClass(F).off(b,this.click),this.isInline||(u.off(_,this._place),p.off(b,this._clickDoc))))},update:function(){this.setDate(this.getValue(),!0)},pick:function(t){var e=this.$element,i=this.date;this.trigger(S,{view:t||"",date:i}).isDefaultPrevented()||(this.setValue(i=this.formatDate(this.date)),this.isInput&&e.trigger("change"))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.isShown&&this.showView(this.options.startView)},getMonthName:function(e,i){var s=this.options,r=s.months;return t.isNumeric(e)?e=m(e):o(i)&&(i=e),i===!0&&(r=s.monthsShort),r[n(e)?e:this.date.getMonth()]},getDayName:function(e,i,s){var r=this.options,a=r.days;return t.isNumeric(e)?e=m(e):(o(s)&&(s=i),o(i)&&(i=e)),a=s===!0?r.daysMin:i===!0?r.daysShort:a,a[n(e)?e:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},setDate:function(e,n){var o=this.options.filter;if(s(e)||i(e)){if(e=this.parseDate(e),t.isFunction(o)&&o.call(this.$element,e)===!1)return;this.date=e,this.viewDate=new Date(e),n||this.pick(),this.isBuilt&&this.fillAll()}},setStartDate:function(t){(s(t)||i(t))&&(this.startDate=this.parseDate(t),this.isBuilt&&this.fillAll())},setEndDate:function(t){(s(t)||i(t))&&(this.endDate=this.parseDate(t),this.isBuilt&&this.fillAll())},parseDate:function(t){var e,n,o,r,a,l,d=this.format,c=[];if(s(t))return new Date(t.getFullYear(),t.getMonth(),t.getDate());if(i(t)&&(c=t.match(k)||[]),t=new Date,n=t.getFullYear(),o=t.getDate(),r=t.getMonth(),e=d.parts.length,c.length===e)for(l=0;l<e;l++)switch(a=parseInt(c[l],10)||1,d.parts[l]){case"dd":case"d":o=a;break;case"mm":case"m":r=a-1;break;case"yy":n=2e3+a;break;case"yyyy":n=a}return new Date(n,r,o)},formatDate:function(t){var e,i,n,o,r,a=this.format,l="";if(s(t))for(l=a.source,i=t.getFullYear(),o={d:t.getDate(),m:t.getMonth()+1,yy:i.toString().substring(2),yyyy:i},o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=a.parts.length,r=0;r<e;r++)n=a.parts[r],l=l.replace(n,o[n]);return l},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(y)}},h.LANGUAGES={},h.DEFAULTS={autoshow:!1,autohide:!1,autopick:!1,inline:!1,container:null,trigger:null,language:"",format:"yyyy-mm-dd",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},h.setDefaults=function(e){t.extend(h.DEFAULTS,t.isPlainObject(e)&&e)},h.other=t.fn.datepicker,t.fn.datepicker=function(e){var n,s=r(arguments,1);return this.each(function(){var o,r,a=t(this),l=a.data(y);if(!l){if(/destroy/.test(e))return;o=t.extend({},a.data(),t.isPlainObject(e)&&e),a.data(y,l=new h(this,o))}i(e)&&t.isFunction(r=l[e])&&(n=r.apply(l,s))}),o(n)?this:n},t.fn.datepicker.Constructor=h,t.fn.datepicker.languages=h.LANGUAGES,t.fn.datepicker.setDefaults=h.setDefaults,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=h.other,this}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.$wrap=t(l),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.ajaxForm={},this.init()}var i=window.Mustache,n="qor.action",o="enable."+n,s="disable."+n,r="click."+n,a="undo."+n,l=".qor-action-forms",d=".qor-page__header",c=".qor-page__body",h=".qor-action-button",u=".mdl-layout__content",f=".qor-actions",p="a.qor-action--button",m=".qor-table__actions a[data-url],[data-url][data-method=POST],[data-url][data-method=PUT],[data-url][data-method=DELETE]",y=".qor-action-bulk-buttons",b=".qor-table-container",g=".qor-table--bulking",v=".qor-search-container",_="is_undo",w=".qor-slideout",q="primary_values[]";return e.prototype={constructor:e,init:function(){this.bind(),this.initActions()},bind:function(){this.$element.on(r,t.proxy(this.click,this)),t(document).on(r,".qor-table--bulking tr",this.click).on(r,p,this.actionLink)},unbind:function(){this.$element.off(r,this.click),t(document).off(r,".qor-table--bulking tr",this.click).off(r,p,this.actionLink)},initActions:function(){this.tables=t(b).find("table").length,this.tables||(t(y).find("button").attr("disabled",!0),t(p).attr("disabled",!0))},collectFormData:function(){var e=t(g).find(".mdl-checkbox__input:checked"),i=[];return e.length&&e.each(function(){var e=t(this).closest("tr").data("primary-key");e&&i.push({name:q,value:e.toString()})}),this.ajaxForm.formData=i,this.ajaxForm},actionLink:function(){if(!t(b).find("table").length)return!1},actionSubmit:function(e){var i=t(e);if(this.$actionButton=i,i.data().method)return this.submit(),!1},click:function(e){var i=t(e.target);if(this.$actionButton=i,i.data().ajaxForm)return this.collectFormData(),this.ajaxForm.properties=i.data(),this.submit(),!1;if(i.is(".qor-action--bulk")&&(this.$wrap.removeClass("hidden"),t(y).find("button").toggleClass("hidden"),this.appendTableCheckbox(),t(b).addClass("qor-table--bulking"),t(d).find(f).addClass("hidden"),t(d).find(v).addClass("hidden")),i.is(".qor-action--exit-bulk")&&(this.$wrap.addClass("hidden"),t(y).find("button").toggleClass("hidden"),this.removeTableCheckbox(),t(b).removeClass("qor-table--bulking"),t(d).find(f).removeClass("hidden"),t(d).find(v).removeClass("hidden")),t(this).is("tr")&&!i.is("a")){var n=t(this).find("td").first();if(n.find(".mdl-checkbox__input").get(0)){var o=t("body").hasClass("qor-bottomsheets-open")||t("body").hasClass("qor-slideout-open"),s=n.find(".mdl-js-checkbox"),r=t('[data-toggle="qor-action-slideout"]').find("form"),a=r.find(".js-primary-value"),l=t(this).data("primary-key"),c=a.filter('[value="'+l+'"]');s.toggleClass("is-checked"),n.parents("tr").toggleClass("is-selected");var h=s.hasClass("is-checked");return n.find("input").prop("checked",h),r.length&&o&&(h&&!c.length&&r.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+l+'" />'),!h&&c.length&&c.remove()),!1}}},renderFlashMessage:function(t){var n=e.FLASHMESSAGETMPL;return i.parse(n),i.render(n,t)},submit:function(){var e,i=this,n=this.$element,o=this.$actionButton,s=this.ajaxForm||{},r=s.properties||o.data(),l=r.url,d=r.undoUrl,h=o.hasClass(_),f=o.closest(w).length,p=n&&!f;return!r.fromIndex||s.formData&&s.formData.length?r.confirm&&r.ajaxForm&&!r.fromIndex?window.confirm(r.confirm)?(r=t.extend({},r,{_method:r.method}),void t.post(r.url,r,function(){window.location.reload()})):void 0:void(r.confirm&&!window.confirm(r.confirm)||(h&&(l=r.undoUrl),t.ajax(l,{method:r.method,data:s.formData,dataType:r.datatype,beforeSend:function(){d?o.prop("disabled",!0):p&&i.switchButtons(n,1)},success:function(s,r,l){var m=l.getResponseHeader("content-type");return d?(n.triggerHandler(a,[o,h,s]),h?o.removeClass(_):o.addClass(_),void o.prop("disabled",!1)):void(m.indexOf("json")>-1?(t(".qor-alert").remove(),p&&i.switchButtons(n),e=t(f?w:u),e.find(c).prepend(i.renderFlashMessage(s))):window.location.reload())},error:function(t,e,s){d?o.prop("disabled",!1):p&&i.switchButtons(n),window.alert([e,s].join(": "))}}))):void window.alert(s.properties.errorNoItem)},switchButtons:function(t,e){var i=!!e;t.find(h).prop("disabled",i)},destroy:function(){this.unbind(),this.$element.removeData(n)},removeTableCheckbox:function(){t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("td").remove()}),t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("th").remove()}),t(".qor-table-container tr.is-selected").removeClass("is-selected"),t(".qor-page__body table.mdl-data-table--selectable").removeClass("mdl-data-table--selectable"),t(".qor-page__body tr.is-selected").removeClass("is-selected")},appendTableCheckbox:function(){t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("td").remove()}),t(".qor-page__body .mdl-data-table__select").each(function(e,i){t(i).parents("th").remove()}),t(".qor-table-container tr.is-selected").removeClass("is-selected"),t(".qor-page__body table").addClass("mdl-data-table--selectable"),new window.MaterialDataTable(t(".qor-page__body table").get(0)),t('thead.is-hidden tr th:not(".mdl-data-table__cell--non-numeric")').clone().prependTo(t('thead:not(".is-hidden") tr'));var e=t('thead:not(".is-fixed") .mdl-checkbox__input'),i=t(".qor-table--medialibrary").length,n=t("body").hasClass("qor-bottomsheets-open")||t("body").hasClass("qor-slideout-open");i&&(e=t("thead .mdl-checkbox__input")),e.on("click",function(){i||(t("thead.is-fixed tr th").eq(0).find("label").click(),t(this).closest("label").toggleClass("is-checked"));var e=t('[data-toggle="qor-action-slideout"]').find("form"),o=e.find(".js-primary-value");if(e.length&&n)if(t(this).is(":checked")){var s=t(".qor-table--bulking tbody tr");s.each(function(){var i=t(this).data("primary-key");i&&e.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+i+'" />')})}else o.remove()})}},e.FLASHMESSAGETMPL='<div class="qor-alert qor-action-alert qor-alert--success [[#error]]qor-alert--error[[/error]]" [[#message]]data-dismissible="true"[[/message]] role="alert"><button type="button" class="mdl-button mdl-button--icon" data-dismiss="alert"><i class="material-icons">close</i></button><span class="qor-alert-message">[[#message]][[message]][[/message]][[#error]][[error]][[/error]]</span></div>',e.DEFAULTS={},t.fn.qorSliderAfterShow.qorActionInit=function(e,i){var n=t(i).find('[data-toggle="qor-action-slideout"]').length,o=t('[data-toggle="qor-action-slideout"]').find("form"),s=t(".qor-page__body .mdl-checkbox__input:checked");n&&s.length&&s.each(function(e,i){var n=t(i).parents("tbody tr").data("primary-key");n&&o.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+n+'" />')})},e.plugin=function(i){return this.each(function(){var o,s=t(this),r=s.data(n);r||s.data(n,r=new e(this,i)),"string"==typeof i&&t.isFunction(o=r[i])&&o.call(r)})},t(function(){var i={},n='[data-toggle="qor.action.bulk"]';t(document).on(s,function(i){e.plugin.call(t(n,i.target),"destroy")}).on(o,function(o){e.plugin.call(t(n,o.target),i)}).on(r,m,function(){return(new e).actionSubmit(this),!1}).triggerHandler(o)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i="qor.autoheight",n="enable."+i,o="disable."+i,s="input";return e.prototype={constructor:e,init:function(){var t=this.$element;this.overflow=t.css("overflow"),this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),t.css("overflow","hidden"),this.resize(),this.bind()},bind:function(){this.$element.on(s,t.proxy(this.resize,this))},unbind:function(){this.$element.off(s,this.resize)},resize:function(){var t=this.$element;t.is(":hidden")||t.height("auto").height(t.prop("scrollHeight")-this.paddingTop-this.paddingBottom)},destroy:function(){this.unbind(),this.$element.css("overflow",this.overflow).removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var o,s=t(this),r=s.data(i);if(!r){if(/destroy/.test(n))return;s.data(i,r=new e(this,n))}"string"==typeof n&&t.isFunction(o=r[n])&&o.apply(r)})},t(function(){var i="textarea.qor-js-autoheight";t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(n)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.disabled=!1,this.resourseData={},this.init()}function i(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)"),n=i.exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function n(t,e,i){var n=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),o=new RegExp("([?&])"+n+"=.*?(&|$)","i"),s=i.indexOf("?")!==-1?"&":"?";return i.match(o)?e?i.replace(o,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?i.replace(o,"$1"):i.replace(o,""):e?i+s+t+"="+e:void 0}var o=window.FormData,s="qor.bottomsheets",r="click."+s,a="submit."+s,l="reload."+s,d="bottomsheetLoaded."+s,c="bottomsheetClosed."+s,h="hide."+s,u="hidden."+s,f="keyup."+s,p="qor-bottomsheets-open",m="is-shown",y="is-slided",b=".mdl-layout__content.qor-page",g=".qor-page__body",v=".qor-page__header",_=".qor-bottomsheets",w=".qor-bottomsheet__filter",q=".qor-bottomsheets__search-button",S=".qor-bottomsheets__search-input",$="http://www.getqor.com/";return e.prototype={constructor:e,init:function(){this.build(),this.bind()},build:function(){var i=t(_);i.length&&i.remove(),this.$bottomsheets=i=t(e.TEMPLATE).appendTo("body"),this.$body=i.find(".qor-bottomsheets__body"),this.$title=i.find(".qor-bottomsheets__title"),this.$header=i.find(".qor-bottomsheets__header"),this.$bodyClass=t("body").prop("class"),this.filterURL="",this.searchParams=""},initBottomsheet:function(){},unbuild:function(){this.$body=null,this.$bottomsheets.remove()},bind:function(){this.$bottomsheets.on(a,"form",this.submit.bind(this)).on(r,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).on(r,".qor-pagination a",this.pagination.bind(this)).on(r,q,this.search.bind(this)).on(f,this.keyup.bind(this)).on("selectorChanged.qor.selector",this.selectorChanged.bind(this)).on("filterChanged.qor.filter",this.filterChanged.bind(this))},unbind:function(){this.$bottomsheets.off(a,"form",this.submit.bind(this)).off(r,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).off(r,".qor-pagination a",this.pagination.bind(this)).off(r,q,this.search.bind(this)).off("selectorChanged.qor.selector",this.selectorChanged.bind(this)).off("filterChanged.qor.filter",this.filterChanged.bind(this))},bindActionData:function(t){for(var e=this.$body.find('[data-toggle="qor-action-slideout"]').find("form"),i=t.length-1;i>=0;i--)e.prepend('<input type="hidden" name="primary_values[]" value="'+t[i]+'" />')},filterChanged:function(t,e,i){var n;return n=this.constructloadURL(e,i),n&&this.reload(n),!1},selectorChanged:function(t,e,i){var n;return n=this.constructloadURL(e,i),n&&this.reload(n),!1},keyup:function(t){var e=this.$bottomsheets.find(S);13===t.which&&e.length&&e.is(":focus")&&this.search()},search:function(){var e=this.$bottomsheets,i="?keyword=",n=e.data().url,o=t.trim(e.find(S).val()),s=n+i+o;this.reload(s)},pagination:function(e){var i=t(e.target),n=i.prop("href");return n&&this.reload(n),!1},reload:function(t){var e=this.$bottomsheets.find(g);this.addLoading(e),this.fetchPage(t)},fetchPage:function(e){var i=this.$bottomsheets,n=this;t.get(e,function(o){var s=t(o).find(b),r=s.find(v),a=s.find(g);a.length?(i.find(g).html(a.html()),r.length&&(n.$body.find(v).html(r.html()).trigger("enable"),n.addHeaderClass()),i.trigger(l)):n.reload(e)}).fail(function(){window.alert("server error, please try again later!")})},constructloadURL:function(t,e){var o,s,r=this.filterURL,a=this.$bottomsheets.data().url;if(!r){if(!a)return;r=a}return o=new URL($+t),s=i(e,o.search),r=this.filterURL=n(e,s,r)},addHeaderClass:function(){this.$body.find(v).hide(),this.$bottomsheets.find(v).children(w).length&&this.$body.addClass("has-header").find(v).show()},addLoading:function(i){i.html("");var n=t(e.TEMPLATE_LOADING).appendTo(i);window.componentHandler.upgradeElement(n.children()[0])},loadScript:function(t){var e=document.createElement("script");e.src=t,document.body.appendChild(e),this.scriptAdded=!0},loadMedialibraryJS:function(e){var i,n=e.filter("script"),o=/theme=media_library/g,s=this;n.each(function(){i=t(this).prop("src"),o.test(i)&&s.loadScript(i)})},submit:function(e){if(!this.resourseData.ingoreSubmit){var i=this.$body,n=e.target,s=t(n),r=this,a=s.find(":submit"),l=s.data().normalSubmit;l||o&&(e.preventDefault(),t.ajax(s.prop("action"),{method:s.prop("method"),data:new o(n),dataType:"html",processData:!1,contentType:!1,beforeSend:function(){a.prop("disabled",!0)},success:function(){t(".qor-error").remove();var e=s.data("returnUrl"),i=s.data("refreshUrl");return i?void(window.location.href=i):"refresh"==e?void r.refresh():void(e&&"refresh"!=e?r.load(e):r.refresh())},error:function(e,n,o){var r;422===e.status?(i.find(".qor-error").remove(),r=t(e.responseText).find(".qor-error"),s.before(r)):window.alert([n,o].join(": "))},complete:function(){a.prop("disabled",!1)}}))}},load:function i(n,o,s){var r,a,i,l=this.options,c=o.actionData,h=this.resourseData,f=h.selectModal,p=h.ingoreSubmit,m=this.$bottomsheets,y=this.$header,g=this.$body;n&&(this.show(),this.addLoading(g),this.filterURL=n,g.removeClass("has-header has-hint"),o=t.isPlainObject(o)?o:{},r=o.method?o.method:"GET",a=o.datatype?o.datatype:"html",(i=t.proxy(function(){t.ajax(n,{method:r,dataType:a,success:t.proxy(function(i){if("GET"===r){var a,_=t(i),w=f&&_.find(".qor-search-container").length;if(a=_.find(b),!a.length)return;p&&a.find(v).remove(),a.find(".qor-button--cancel").attr("data-dismiss","bottomsheets"),g.html(a.html()),this.$title.html(_.find(l.title).html()),f&&(g.find(".qor-button--new").data("ingoreSubmit",!0).data("selectId",h.selectId),"one"==f||"undefined"!=typeof h.maxItem&&"1"==h.maxItem||g.addClass("has-hint"),"mediabox"!=f||this.scriptAdded||this.loadMedialibraryJS(_)),y.find(".qor-button--new").remove(),this.$title.after(g.find(".qor-button--new")),w&&(m.addClass("has-search"),y.find(".qor-bottomsheets__search").remove(),y.prepend(e.TEMPLATE_SEARCH)),c&&c.length&&this.bindActionData(c),m.trigger("enable"),m.one(u,function(){t(this).trigger("disable")}),this.addHeaderClass(),m.data(o),s&&t.isFunction(s)&&s(),m.trigger(d,[n,i])}else o.returnUrl?this.load(o.returnUrl):this.refresh()},this),error:t.proxy(function(){this.hide();var e;e=t(".qor-error span").length>0?t(".qor-error span").map(function(){return t(this).text()}).get().join(", "):"Server error, please try again later!",
window.alert(e)},this)})},this))())},open:function(t,e){this.resourseData=t,this.load(t.url,t,e)},show:function(){this.$bottomsheets.addClass(m).get(0).offsetHeight,this.$bottomsheets.addClass(y),t("body").addClass(p)},hide:function(){var e,i=this.$bottomsheets,n=t(".qor-datepicker").not(".hidden");if(n.length&&n.addClass("hidden"),e=t.Event(h),i.trigger(e),!e.isDefaultPrevented())return i.removeClass(y).removeClass(m).trigger(u),t("body").removeClass(p),i.qorSelectCore("destroy"),i.trigger(c),this.init(),!1},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(s)}},e.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},e.TEMPLATE_ERROR='<ul class="qor-error"><li><label><i class="material-icons">error</i><span>[[error]]</span></label></li></ul>',e.TEMPLATE_LOADING='<div style="text-align: center; margin-top: 30px;"><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>',e.TEMPLATE_SEARCH='<div class="qor-bottomsheets__search"><input autocomplete="off" type="text" class="mdl-textfield__input qor-bottomsheets__search-input" placeholder="Search" /><button class="mdl-button mdl-js-button mdl-button--icon qor-bottomsheets__search-button" type="button"><i class="material-icons">search</i></button></div>',e.TEMPLATE='<div class="qor-bottomsheets"><div class="qor-bottomsheets__header"><h3 class="qor-bottomsheets__title"></h3><button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-bottomsheets__close" data-dismiss="bottomsheets"><span class="material-icons">close</span></button></div><div class="qor-bottomsheets__body"></div></div>',e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data(s);if(!r){if(/destroy/.test(i))return;o.data(s,r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t.fn.qorBottomSheets=e.plugin,e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i="qor.chooser",n="enable."+i,o="disable."+i;return e.prototype={constructor:e,init:function(){var e,i=this.$element,n=i.data("remote-data"),o={minimumResultsForSearch:8,dropdownParent:i.parent()};n&&(o.ajax=t.fn.select2.ajaxCommonOptions,o.templateResult=function(e){var n=i.parents(".qor-field").find('[name="select2-result-template"]');return t.fn.select2.ajaxFormatResult(e,n)},o.templateSelection=function(e){if(e.loading)return e.text;var n=i.parents(".qor-field").find('[name="select2-selection-template"]');return t.fn.select2.ajaxFormatResult(e,n)}),i.on("select2:select",function(e){t(e.target).attr("chooser-selected","true")}).on("select2:unselect",function(e){t(e.target).attr("chooser-selected","")}),i.select2(o),this.resetSelect2Width(),e=window._.debounce(this.resetSelect2Width.bind(this),300),t(window).resize(e),i.val()&&i.attr("chooser-selected","true")},resetSelect2Width:function(){var t,e=this.$element.data().select2;e&&e.$container&&(t=e.$container,t.width(t.parent().width()))},destroy:function(){this.$element.select2("destroy").removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var o,s=t(this),r=s.data(i);if(!r){if(/destroy/.test(n))return;s.data(i,r=new e(this,n))}"string"==typeof n&&t.isFunction(o=r[n])&&o.apply(r)})},t(function(){var i='select[data-toggle="qor.chooser"]';t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(n)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function i(e){var i,n={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(n[String(i).toLowerCase()]=e[i]);return n}function n(i,n){var o=String(n),s=o.toLowerCase(),r=o.toUpperCase(),a=e(o);if(t.isPlainObject(i))return i[s]||i[a]||i[r]}function o(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]="");return t}function s(e,i){return"string"==typeof e&&"object"===("undefined"==typeof i?"undefined":_typeof(i))&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function r(e,i){this.$element=t(e),this.options=t.extend(!0,{},r.DEFAULTS,t.isPlainObject(i)&&i),this.data=null,this.init()}var a=window.URL||window.webkitURL,l="qor.cropper",d="enable."+l,c="disable."+l,h="change."+l,u="click."+l,f="shown.qor.modal",p="hidden.qor.modal",m=".qor-cropper__toggle",y=".qor-cropper__canvas",b=".qor-cropper__wrapper",g=".qor-cropper__options",v=".qor-cropper__save",_=".qor-cropper__toggle--delete",w=".qor-cropper__toggle--crop",q=".qor-fieldset__undo";return r.prototype={constructor:r,init:function(){var e,i,n,o,s,r=this.options,a=this.$element,l=a.closest(r.parent),d=this;l.length||(l=a.parent()),this.$parent=l,this.$output=l.find(r.output),this.$list=e=l.find(r.list),o=this.$output.data().fetchSizedata,e.find("img").attr("src")||e.find("ul").hide(),o?t.getJSON(o,function(t){s=JSON.parse(t.MediaOption),d.$output.val(JSON.stringify(t)),d.data=s||{},d.build(),d.bind()}):(n=t.trim(this.$output.val()),n&&(i=JSON.parse(n)),this.data=i||{},this.build(),this.bind())},build:function(){var e=this.$output.data(),i={title:e.cropperTitle,ok:e.cropperOk,cancel:e.cropperCancel},n=this.options.text;i.ok&&i.title&&i.cancel&&(n=i),this.wrap(),this.$modal=t(s(r.MODAL,n)).appendTo("body")},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t,e=this.$list;e.find("li").append(r.TOGGLE),t=e.find("img"),t.wrap(r.CANVAS),this.center(t)},unwrap:function(){var e=this.$list;e.find(m).remove(),e.find(y).each(function(){var e=t(this);e.before(e.html()).remove()})},bind:function(){this.$element.on(h,t.proxy(this.read,this)),this.$list.on(u,t.proxy(this.click,this)),this.$modal.on(f,t.proxy(this.start,this)).on(p,t.proxy(this.stop,this))},unbind:function(){this.$element.off(h,this.read),this.$list.off(u,this.click),this.$modal.off(f,this.start).off(p,this.stop)},click:function(e){var i,n,o=e.target,s=this.data;o!==this.$list[0]&&(i=t(o),i.closest(_).length&&(s.Delete=!0,this.$output.val(JSON.stringify(s)),this.$list.hide(),n=t(r.ALERT),n.find(q).one(u,function(){n.remove(),this.$list.show(),delete s.Delete,this.$output.val(JSON.stringify(s))}.bind(this)),this.$parent.find(".qor-fieldset").append(n)),i.closest(w).length&&(i=i.closest("li").find("img"),this.$target=i,this.$modal.qorModal("show")))},read:function(t){var e,i=t.target.files,n=this.$parent.find(".qor-fieldset__alert");n.length&&(n.remove(),this.data=o(this.data)),i&&i.length&&(e=i[0],/^image\/\w+$/.test(e.type)&&a?(this.load(a.createObjectURL(e)),this.$parent.find(".qor-medialibrary__image-desc").show()):this.$list.empty().html(r.FILE_LIST.replace("{{filename}}",e.name)))},load:function(e,i){var o,s,a=this.options,l=this,d=this.$list,c=d.find("ul"),h=this.data||{};c.length&&c.find("li").length||(c=t(r.LIST),d.html(c),this.wrap()),c.show(),o=d.find("img"),s=o.length,o.one("load",function(){var e,o=t(this),r=this.naturalWidth,d=this.naturalHeight,c=o.data(),u=c.sizeResolution,f=c.sizeName,p={},m={},y=c.sizeResolutionWidth,b=c.sizeResolutionHeight;u?(y||b||(y=n(u,"width"),b=n(u,"height")),e=y/b,d*e>r?(y=r,b=y/e):(b=d,y=b*e),p={naturalWidth:r,naturalHeight:d},m={x:Math.round((r-y)/2),y:Math.round((d-b)/2),width:Math.round(y),height:Math.round(b)},l.preview(o,p,m),f&&(h.crop=!0,h[a.key]||(h[a.key]={}),h[a.key][f]=m)):l.center(o),l.$output.val(JSON.stringify(h)),f&&h[a.key]&&Object.keys(h[a.key]).length>=s&&i&&t.isFunction(i)&&i()}).attr("src",e).data("originalUrl",e),d.show()},start:function(){var e,o=this.options,s=this.$modal,r=this.$target,a=r.data(),l=a.sizeName||"original",d=a.sizeResolution,c=t("<img>").attr("src",a.originalUrl),h=this.data||{},f=this,p=NaN,m=a.sizeResolutionWidth,y=a.sizeResolutionHeight;d&&(m||y||(m=n(d,"width"),y=n(d,"height")),p=m/y),h[o.key]||(h[o.key]={}),s.trigger("enable.qor.material").find(b).html(c),e=this.getList(p),e&&s.find(g).show().append(e),c.cropper({aspectRatio:p,data:i(h[o.key][l]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,autoCropArea:1,built:function(){s.find(v).one(u,function(){var e,i=c.cropper("getData",!0),n=[];h.crop=!0,h[o.key][l]=i,f.imageData=c.cropper("getImageData"),f.cropData=i,e=c.cropper("getCroppedCanvas").toDataURL(),s.find(g+" input").each(function(){var e=t(this);e.prop("checked")&&n.push(e.attr("name"))}),f.output(e,n),s.qorModal("hide")})}})},stop:function(){this.$modal.trigger("disable.qor.material").find(b+" > img").cropper("destroy").remove().end().find(g).hide().find("ul").remove()},getList:function(e){var i=[];return this.$list.find("img").not(this.$target).each(function(){var o=t(this).data(),s=o.sizeResolution,r=o.sizeName,a=o.sizeResolutionWidth,l=o.sizeResolutionHeight;s&&(a||l||(a=n(s,"width"),l=n(s,"height")),a/l===e&&i.push('<label><input type="checkbox" name="'+r+'" checked> <span>'+r+"<small>("+a+"&times;"+l+" px)</small></span></label>"))}),i.length?"<ul><li>"+i.join("</li><li>")+"</li></ul>":""},output:function(e,i){var n=this.$target;e?this.center(n.attr("src",e),!0):this.preview(n),t.isArray(i)&&i.length&&this.autoCrop(e,i),this.$output.val(JSON.stringify(this.data)).trigger(h)},preview:function(e,i,n){var o,s=e.parent(),r=s.parent(),a=r.width(),l=r.height(),d=i||this.imageData,c=t.extend({},n||this.cropData),h=c.width/c.height,u=a;0!=u&&0!=d.naturalWidth&&0!=d.naturalHeight&&(l*h<=a&&(u=l*h),o=c.width/u,e.css({maxWidth:d.naturalWidth/o,maxHeight:d.naturalHeight/o}),this.center(e))},center:function(e,i){e.each(function(){function e(){var t=s.height(),e=o.height(),i="auto";e<t&&(i=(t-e)/2),o.css("margin-top",i)}var n=t(this),o=n.parent(),s=o.parent();i&&o.add(n).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(e,i){var n=this.cropData,o=this.data[this.options.key],s=this;this.$list.find("img").not(this.$target).each(function(){var r=t(this),a=r.data("sizeName");t.inArray(a,i)>-1&&(o[a]=t.extend({},n),e?s.center(r.attr("src",e),!0):s.preview(r))})},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(l)}},r.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},r.TOGGLE='<div class="qor-cropper__toggle"><div class="qor-cropper__toggle--crop"><i class="material-icons">crop</i></div><div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div></div>',r.ALERT='<div class="qor-fieldset__alert"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>',r.CANVAS='<div class="qor-cropper__canvas"></div>',r.LIST="<ul><li><img></li></ul>",r.FILE_LIST='<div class="qor-file__list-item"><span><span>{{filename}}</span></span>',r.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-cropper__wrapper"></div><div class="qor-cropper__options"><p>Sync cropping result to:</p></div></div><div class="mdl-card__actions mdl-card--border"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div><div class="mdl-card__menu"><button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close"><i class="material-icons">close</i></button></div></div></div>',r.plugin=function(e){return this.each(function(){var i,n,o=t(this),s=o.data(l);if(!s){if(!t.fn.cropper)return;if(/destroy/.test(e))return;i=t.extend(!0,{},o.data(),"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e),o.data(l,s=new r(this,i))}"string"==typeof e&&t.isFunction(n=s[e])&&n.apply(s)})},t(function(){var e=".qor-file__input",i={parent:".qor-file",output:".qor-file__options",list:".qor-file__list",key:"CropOptions"};t(document).on(d,function(n){r.plugin.call(t(e,n.target),i)}).on(c,function(i){r.plugin.call(t(e,i.target),"destroy")}).triggerHandler(d)}),r});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e,i){return"string"==typeof e&&"object"===("undefined"==typeof i?"undefined":_typeof(i))&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function i(e,n){this.$element=t(e),this.options=t.extend(!0,{},i.DEFAULTS,t.isPlainObject(n)&&n),this.date=null,this.formatDate=null,this.built=!1,this.pickerData=this.$element.data(),this.init()}var n="qor.datepicker",o="enable."+n,s="disable."+n,r="pick."+n,a="click."+n,l=".qor-datepicker__embedded",d=".qor-datepicker__save",c=".qor-field__datetimepicker";return i.prototype={init:function(){this.bind()},bind:function(){this.$element.on(a,t.proxy(this.show,this))},unbind:function(){this.$element.off(a,this.show)},build:function(){var n,o=this.$element,s=this.pickerData,h={date:o.val(),inline:!0},u=o.closest(c),f=u.find(s.targetInput);this.built||(this.$modal=n=t(e(i.TEMPLATE,this.options.text)).appendTo("body"),f.length&&(h.date=f.val()),s.targetInput&&f.data().startDate&&(h.startDate=new Date),n.find(l).on(r,t.proxy(this.change,this)).datepicker(h).triggerHandler(r),n.find(d).on(a,t.proxy(this.pick,this)),this.built=!0)},unbuild:function(){this.built&&this.$modal.find(l).off(r,this.change).datepicker("destroy").end().find(d).off(a,this.pick).end().remove()},change:function(e){var i,n=this.$modal,o=t(e.target);this.date=i=o.datepicker("getDate"),this.formatDate=o.datepicker("getDate",!0),n.find(".qor-datepicker__picked-year").text(i.getFullYear()),n.find(".qor-datepicker__picked-date").text([o.datepicker("getDayName",i.getDay(),!0)+",",String(o.datepicker("getMonthName",i.getMonth(),!0)),i.getDate()].join(" "))},show:function(){this.built||this.build(),this.$modal.qorModal("show")},pick:function(){var t=this.$element,e=this.pickerData.targetInput,i=this.formatDate;if(e){t=t.closest(c).find(e);var n=/^\d{4}-\d{1,2}-\d{1,2}/,o=t.val(),s=n.test(o);s?i=o.replace(n,i):i+=" 00:00"}t.val(i).trigger("change"),this.$modal.qorModal("hide")},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(n)}},i.DEFAULTS={text:{title:"Pick a date",ok:"OK",cancel:"Cancel"}},i.TEMPLATE='<div class="qor-modal fade qor-datepicker" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-datepicker__picked"><div class="qor-datepicker__picked-year"></div><div class="qor-datepicker__picked-date"></div></div><div class="qor-datepicker__embedded"></div></div><div class="mdl-card__actions"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-datepicker__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div></div></div>',i.plugin=function(e){return this.each(function(){var o,s,r=t(this),a=r.data(n);if(!a){if(!t.fn.datepicker)return;if(/destroy/.test(e))return;o=t.extend(!0,{},r.data(),"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e),r.data(n,a=new i(this,o))}"string"==typeof e&&t.isFunction(s=a[e])&&s.apply(a)})},t(function(){var e='[data-toggle="qor.datepicker"]';t(document).on(s,function(n){i.plugin.call(t(e,n.target),"destroy")}).on(o,function(n){i.plugin.call(t(e,n.target))}).triggerHandler(o)}),i});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){var e=function e(i,n){var o=!1;return this instanceof jQuery?(n=i,i=this):i instanceof jQuery||(i=t(i)),i.each(function(i,s){var r=t(s);if(r.is("form")){if(r.hasClass("ignore-dirtyform"))return!1;if(o=e(r.find('input:not([type="hidden"]):not(".search-field input"):not(".chosen-search input"):not(".ignore-dirtyform"), textarea, select'),n))return!1}else if(r.is(":checkbox")||r.is(":radio")){if(s.checked!=s.defaultChecked)return o=!0,!1}else if(r.is("input")||r.is("textarea")){if(s.value!=s.defaultValue)return o=!0,!1}else if(r.is("select")){for(var a,l=0,d=s.options.length,c=0;c<d;c++)a=s.options[c],o=o||a.selected!=a.defaultSelected,a.defaultSelected&&(l=c);if(o&&!s.multiple&&(o=l!=s.selectedIndex),o)return!1}}),o};t.fn.extend({dirtyForm:e}),t(function(){t(document).on("submit","form",function(){window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null}),t(document).on("change","form",function(){t(this).dirtyForm()?(t.fn.qorSlideoutBeforeHide=!0,window.onbeforeunload=function(){return"You have unsaved changes on this page. If you leave this page, you will lose all unsaved changes."}):(t.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)})})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location,n=t(document),o="qor.filter",s="filterChanged."+o,r="enable."+o,a="disable."+o,l="click."+o,d=".qor-bottomsheets",c=".qor-filter__start",h=".qor-filter__end",u="[data-search-param]",f=".qor-filter__dropdown",p=".qor-filter-toggle",m="is-selected";return e.prototype={constructor:e,init:function(){this.bind();var t=this.$element;this.$timeStart=t.find(c),this.$timeEnd=t.find(h),this.$searchParam=t.find(u),this.$searchButton=t.find(this.options.button),this.startWeekDate=window.moment().startOf("isoweek").toDate(),this.endWeekDate=window.moment().endOf("isoweek").toDate(),this.startMonthDate=window.moment().startOf("month").toDate(),this.endMonthDate=window.moment().endOf("month").toDate(),this.initActionTemplate()},bind:function(){var t=this.options;this.$element.on(l,t.trigger,this.show.bind(this)).on(l,t.label,this.setFilterTime.bind(this)).on(l,t.clear,this.clear.bind(this)).on(l,t.button,this.search.bind(this)),n.on(l,this.close)},unbind:function(){var t=this.options;this.$element.off(l,t.trigger,this.show.bind(this)).off(l,t.label,this.setFilterTime.bind(this)).off(l,t.clear,this.clear.bind(this)).off(l,t.button,this.search.bind(this))},initActionTemplate:function(){var e=this.getUrlParameter("schedule_start_at"),i=this.getUrlParameter("schedule_end_at"),n=t(this.options.trigger);(e||i)&&(this.$timeStart.val(e),this.$timeEnd.val(i),i=i?" - "+i:"",n.addClass("active clearable").find(".qor-selector-label").html(e+i),n.append('<i class="material-icons qor-selector-clear">clear</i>'))},show:function(){this.$element.find(f).toggle()},close:function(e){var i=t(e.target),n=t(f),o=n.is(":visible"),s=i.closest(f).length,r=i.closest(p).length,a=i.closest(".qor-modal").length,l=i.closest(".ui-timepicker-wrapper").length;o&&(s||r||a||l)||n.hide()},setFilterTime:function(e){var i,n,o,s,r=t(e.target),a=r.data(),l=a.filterRange;if(!l)return!1;if(t(this.options.label).removeClass(m),r.addClass(m),"events"==l)return this.$timeStart.val(a.scheduleStartAt||""),this.$timeEnd.val(a.scheduleEndAt||""),this.$searchButton.click(),!1;switch(l){case"today":o=s=new Date;break;case"week":o=this.startWeekDate,s=this.endWeekDate;break;case"month":o=this.startMonthDate,s=this.endMonthDate}return!(!o||!s)&&(i=this.getTime(o)+" 00:00",n=this.getTime(s)+" 23:59",this.$timeStart.val(i),this.$timeEnd.val(n),void this.$searchButton.click())},getTime:function(t){var e=t.getMonth()+1,i=t.getDate();return e=e<8?"0"+e:e,i=i<10?"0"+i:i,t.getFullYear()+"-"+e+"-"+i},clear:function(){var e=t(this.options.trigger),i=e.find(".qor-selector-label");return e.removeClass("active clearable"),i.html(i.data("label")),this.$timeStart.val(""),this.$timeEnd.val(""),this.$searchButton.click(),!1},getUrlParameter:function(t){var e=i.search;t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),o=n.exec(e);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))},updateQueryStringParameter:function(t,e,n){var o=n||i.href,s=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),r=new RegExp("([?&])"+s+"=.*?(&|$)","i"),a=o.indexOf("?")!==-1?"&":"?";return o.match(r)?e?o.replace(r,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?o.replace(r,"$1"):o.replace(r,""):e?o+a+t+"="+e:o},search:function(){var e,n=this.$searchParam,o=this,r="qor.filter.time";n.length&&(n.each(function(){var i=t(this),n=i.data().searchParam,s=i.val();e=o.updateQueryStringParameter(n,s,e)}),this.$element.closest(d).length?t(d).trigger(s,[e,r]):i.href=e)},destroy:function(){this.unbind(),this.$element.removeData(o)}},e.DEFAULTS={label:!1,trigger:!1,button:!1,clear:!1},e.plugin=function(i){return this.each(function(){var n,s=t(this),r=s.data(o);if(!r){if(/destroy/.test(i))return;s.data(o,r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){var i='[data-toggle="qor.filter.time"]',n={label:".qor-filter__block-buttons button",trigger:"a.qor-filter-toggle",button:".qor-filter__button-search",clear:".qor-selector-clear"};t(document).on(a,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(r,function(o){e.plugin.call(t(i,o.target),n)}).triggerHandler(r)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}function i(e,i){var s,r=o.search;return t.isArray(e)&&(s=n(r),t.each(e,function(e,n){e=t.inArray(n,s),e===-1?s.push(n):i&&s.splice(e,1)}),r="?"+s.join("&")),r}function n(e){var i=[];return e&&e.indexOf("?")>-1&&(e=e.split("?")[1],e&&e.indexOf("#")>-1&&(e=e.split("#")[0]),e&&(i=t.map(e.split("&"),function(e){var i,n=[];if(e=e.split("="),!/page/.test(e[0]))return i=e[1],n.push(e[0]),i&&(i=t.trim(decodeURIComponent(i)),i&&n.push(i)),n.join("=")}))),i}var o=window.location,s="qor.filter",r="filterChanged."+s,a="enable."+s,l="disable."+s,d="click."+s,c="change."+s,h="is-active",u=".qor-bottomsheets";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){var e=this.options;this.$element.on(d,e.label,t.proxy(this.toggle,this)).on(c,e.group,t.proxy(this.toggle,this))},unbind:function(){this.$element.off(d,this.toggle).off(c,this.toggle)},toggle:function(e){var s,a,l,d,c,f,p,m,y=t(e.currentTarget),b=[];y.is("select")?(s=n(o.search),m=d=y.attr("name"),c=y.val(),a=[d],c&&a.push(c),a=a.join("="),c&&b.push(a),y.children().each(function(){var e=t(this),i=[d],n=t.trim(e.prop("value"));if(n&&i.push(n),i=i.join("="),f=t.inArray(i,s),f>-1)return p=i,!1}),p?(b.push(p),l=i(b,!0)):l=i(b)):y.is("a")&&(e.preventDefault(),m=y.data().paramName,b=n(y.attr("href")),l=y.hasClass(h)?i(b,!0):i(b)),this.$element.closest(u).length?t(u).trigger(r,[l,m]):o.search=l},destroy:function(){this.unbind(),this.$element.removeData(s)}},e.DEFAULTS={label:!1,group:!1},e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data(s);if(!r){if(/destroy/.test(i))return;o.data(s,r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){var i='[data-toggle="qor.filter"]',n={label:"a",group:"select"};t(document).on(l,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(a,function(o){e.plugin.call(t(i,o.target),n)}).triggerHandler(a)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.$clone=null,this.init()}var i=t(window),n=window._,o="qor.fixer",s="enable."+o,r="disable."+o,a="click."+o,l="resize."+o,d="scroll."+o,c="is-hidden",h="is-fixed",u=".qor-page__header";return e.prototype={constructor:e,init:function(){var e=this.options,i=this.$element;this.buildCheck()||(this.$thead=i.find("thead:first"),this.$tbody=i.find("tbody:first"),this.$header=t(e.header),this.$subHeader=t(e.subHeader),this.$content=t(e.content),this.marginBottomPX=parseInt(this.$subHeader.css("marginBottom")),this.paddingHeight=e.paddingHeight,this.fixedHeaderWidth=[],this.isEqualed=!1,this.resize(),this.bind())},bind:function(){this.$element.on(a,t.proxy(this.check,this)),this.$content.on(d,t.proxy(this.toggle,this)),i.on(l,t.proxy(this.resize,this))},unbind:function(){this.$element.off(a,this.check),this.$content.off(d,this.toggle).off(l,this.resize)},build:function(){if(this.$content.length){var e=this.$element,i=this.$thead,n=this.$clone,o=this,s=i.find("> tr").children(),r=this.$content.offset().top+t(u).height();n||(this.$clone=n=i.clone().prependTo(e).css({top:r})),n.addClass([h,c].join(" ")).find("> tr").children().each(function(e){t(this).outerWidth(s.eq(e).outerWidth()),o.fixedHeaderWidth.push(t(this).outerWidth())})}},unbuild:function(){this.$clone.remove()},buildCheck:function(){var e=this.$element;return!!(t(".qor-page__body .qor-js-table").length>1||t(".qor-global-search--container").length>0||e.hasClass("qor-table--medialibrary")||e.is(":hidden")||e.find("tbody > tr:visible").length<=1)},check:function(e){var i,n=t(e.target);n.is(".qor-js-check-all")&&(i=n.prop("checked"),n.closest("thead").siblings("thead").find(".qor-js-check-all").prop("checked",i).closest(".mdl-checkbox").toggleClass("is-checked",i))},toggle:function(){if(this.$content.length){var e=this,i=this.$clone,o=this.$thead,s=this.$content.scrollTop(),r=this.$content.scrollLeft(),a=this.$subHeader.outerHeight()+this.paddingHeight+this.marginBottomPX,l=t(".qor-page__header").outerHeight();if(!this.isEqualed){this.headerWidth=[];var d=o.find("> tr").children();d.each(function(){e.headerWidth.push(t(this).outerWidth())});var h=n.difference(e.fixedHeaderWidth,e.headerWidth);h.length&&(t("thead.is-fixed").find(">tr").children().each(function(i){t(this).outerWidth(e.headerWidth[i])}),this.isEqualed=!0)}s>a-l?i.css({"margin-left":-r}).removeClass(c):i.css({"margin-left":"0"}).addClass(c)}},resize:function(){this.build(),this.toggle()},destroy:function(){this.buildCheck()||(this.unbind(),this.unbuild(),this.$element.removeData(o))}},e.DEFAULTS={header:!1,content:!1},e.plugin=function(i){return this.each(function(){var n,s=t(this),r=s.data(o);r||s.data(o,r=new e(this,i)),"string"==typeof i&&t.isFunction(n=r[i])&&n.call(r)})},t(function(){var i=".qor-js-table",n={header:".mdl-layout__header",subHeader:".qor-page__header",content:".mdl-layout__content",paddingHeight:2};t(document).on(r,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(s,function(o){e.plugin.call(t(i,o.target),n)}).triggerHandler(s)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e){n&&(t(e).is(l)?n.upgradeElements(e):n.upgradeElements(t(l,e).toArray()))}function i(e){n&&(t(e).is(l)?n.downgradeElements(e):n.downgradeElements(t(l,e).toArray()))}var n=window.componentHandler,o="qor.material",s="enable."+o,r="disable."+o,a="update."+o,l='[class*="mdl-js"]';t(function(){t(document).on(s,function(t){e(t.target)}).on(r,function(t){i(t.target)}).on(a,function(t){i(t.target),e(t.target)})})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.transitioning=!1,this.fadable=!1,this.init()}var i=t(document),n="qor.modal",o="enable."+n,s="disable."+n,r="click."+n,a="keyup."+n,l="show."+n,d="shown."+n,c="hide."+n,h="hidden."+n,u="transitionend",f="qor-modal-open",p="shown",m="fade",y="in",b="aria-hidden";return e.prototype={constructor:e,init:function(){this.fadable=this.$element.hasClass(m),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on(r,t.proxy(this.click,this)),this.options.keyboard&&i.on(a,t.proxy(this.keyup,this))},unbind:function(){this.$element.off(r,this.click),this.options.keyboard&&i.off(a,this.keyup)},click:function(e){var i=this.$element[0],n=e.target;if(n===i&&this.options.backdrop)return void this.hide();for(;n!==i;){if("modal"===t(n).data("dismiss")){this.hide();break}n=n.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(e){var n,o=this.$element;if(!this.transitioning&&!o.hasClass(y)&&(n=t.Event(l),o.trigger(n),!n.isDefaultPrevented())){if(i.find("body").addClass(f),o.addClass(p).scrollTop(0).get(0).offsetHeight,this.transitioning=!0,e||!this.fadable)return o.addClass(y),void this.shown();o.one(u,t.proxy(this.shown,this)),o.addClass(y)}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr(b,!1).trigger(d).focus()},hide:function(e){var n,o=this.$element;if(!this.transitioning&&o.hasClass(y)&&(n=t.Event(c),o.trigger(n),!n.isDefaultPrevented())){if(i.find("body").removeClass(f),this.transitioning=!0,e||!this.fadable)return o.removeClass(y),void this.hidden();o.one(u,t.proxy(this.hidden,this)),o.removeClass(y)}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass(p).attr(b,!0).trigger(h)},toggle:function(){this.$element.hasClass(y)?this.hide():this.show()},destroy:function(){this.$element.removeData(n)}},e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0
},e.plugin=function(i){return this.each(function(){var o,s=t(this),r=s.data(n);if(!r){if(/destroy/.test(i))return;s.data(n,r=new e(this,i))}"string"==typeof i&&t.isFunction(o=r[i])&&o.apply(r)})},t.fn.qorModal=e.plugin,t(function(){var i=".qor-modal";t(document).on(r,'[data-toggle="qor.modal"]',function(){var i=t(this),o=i.data(),s=t(o.target||i.attr("href"));e.plugin.call(s,s.data(n)?"toggle":o)}).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(o,function(n){e.plugin.call(t(i,n.target))})}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i="qor.tabbar.radio",n="enable."+i,o="disable."+i,s="click."+i,r="switched."+i,a="[data-tab-target]",l="[data-tab-source]",d="is-active";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){this.$element.on(s,a,this.switchTab.bind(this))},unbind:function(){this.$element.off(s,a,this.switchTab)},switchTab:function(e){var i=t(e.target),n=this.$element,o=n.find(a),s=n.find(l),c=i.data(),h=c.tabTarget;i.hasClass(d)||(o.removeClass(d),i.addClass(d),s.hide().filter('[data-tab-source="'+h+'"]').show(),n.trigger(r,[n,h]))},destroy:function(){this.unbind()}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var o,s=t(this),r=s.data(i);if(!r){if(/destroy/.test(n))return;s.data(i,r=new e(this,n))}"string"==typeof n&&t.isFunction(o=r[n])&&o.apply(r)})},t(function(){var i='[data-toggle="qor.tab.radio"]';t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(n)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e){var i=[];return t.isPlainObject(e)&&t.each(e,function(){i.push(arguments[1])}),i.join()}function i(t){var e=t&&t.split(",");return t=null,e&&4===e.length&&(t={x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}),t}function n(t){return"string"==typeof t&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}function o(e){var i,o={};if(t.isPlainObject(e))for(i in e)e.hasOwnProperty(i)&&(o[n(i)]=e[i]);return o}function s(e,i){return"string"==typeof e&&"object"===("undefined"==typeof i?"undefined":_typeof(i))&&t.each(i,function(t,i){e=e.replace("${"+String(t).toLowerCase()+"}",i)}),e}function r(t){return t.replace(/&/g," ").replace(/</g," ").replace(/>/g," ").replace(/\"/g," ").replace(/\'/g," ").replace(/\`/g," ")}function a(e,i){this.$element=t(e),this.options=t.extend(!0,{},a.DEFAULTS,t.isPlainObject(i)&&i),this.init()}var l="qor.redactor",d="enable."+l,c="disable."+l,h="click."+l,u="keyup."+l,f="addCrop."+l,p="removeCrop."+l,m="shown.qor.modal",y="hidden.qor.modal",b=".qor-cropper__wrapper",g=".qor-cropper__save",v=".qor-cropper__toggle--redactor",_="#redactor-link-title",w="#redactor-link-url-text",q="#redactor-modal-button-cancel";return a.prototype={constructor:a,init:function(){var e=this.options,i=this.$element,n=i.closest(e.parent);n.length||(n=i.parent()),this.$parent=n,this.$button=t(a.BUTTON),this.$modal=t(s(a.MODAL,e.text)).appendTo("body"),this.bind()},bind:function(){this.$element.on(f,t.proxy(this.addButton,this)).on(p,t.proxy(this.removeButton,this))},unbind:function(){this.$element.off(f).off(p)},addButton:function(e,i){var n=t(i);this.$button.css("left",t(i).width()/2).prependTo(n.parent()).find(v).one(h,t.proxy(this.crop,this,n))},removeButton:function(){this.$button.find(v).off(h),this.$button.detach()},crop:function(n){var s=this.options,r=n.attr("src"),a=r,l=t("<img>"),d=this.$modal;t.isFunction(s.replace)&&(a=s.replace(a)),l.attr("src",a),d.one(m,function(){l.cropper({data:i(n.attr("data-crop-options")),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,built:function(){d.find(g).one(h,function(){var i=l.cropper("getData",!0);t.ajax(s.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:r,CropOptions:{original:o(i)},Crop:!0}),dataType:"json",success:function(o){t.isPlainObject(o)&&o.url&&(n.attr("src",o.url).attr("data-crop-options",e(i)).removeAttr("style").removeAttr("rel"),t.isFunction(s.complete)&&s.complete(),d.qorModal("hide"))}})})}})}).one(y,function(){l.cropper("destroy").remove()}).qorModal("show").find(b).append(l)},destroy:function(){this.unbind(),this.$modal.qorModal("hide").remove(),this.$element.removeData(l)}},a.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},a.BUTTON='<div class="qor-redactor__image--buttons"><span class="qor-redactor__image--edit" contenteditable="false">Edit</span><span class="qor-cropper__toggle--redactor" contenteditable="false">Crop</span></div>',a.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true"><div class="mdl-card mdl-shadow--2dp" role="document"><div class="mdl-card__title"><h2 class="mdl-card__title-text">${title}</h2></div><div class="mdl-card__supporting-text"><div class="qor-cropper__wrapper"></div></div><div class="mdl-card__actions mdl-card--border"><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">${ok}</a><a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">${cancel}</a></div><div class="mdl-card__menu"><button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close"><i class="material-icons">close</i></button></div></div></div>',a.plugin=function(e){return this.each(function(){var i,n,o=t(this),s=o.data(l);if(s)/destroy/.test(e)&&o.redactor("core.destroy");else{if(!t.fn.redactor)return;if(/destroy/.test(e))return;o.data(l,s={}),i={imageUpload:o.data("uploadUrl"),fileUpload:o.data("uploadUrl"),toolbarFixed:!0,imageResizable:!0,imagePosition:!0,toolbarFixedTarget:".qor-slideout",callbacks:{init:function(){var e,i=["html","format","bold","italic","deleted","lists","image","file","link","horizontalrule","table"];i.forEach(function(t){e=this.button.get(t),this.button.setIcon(e,'<i class="material-icons '+t+'"></i>')},this),o.data("cropUrl")&&o.data(l,s=new a(o,{remote:o.data("cropUrl"),text:o.data("text"),parent:".qor-field",toggle:".qor-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:t.proxy(function(){this.code.sync()},this)}))},imageUpload:function(e,i){var n=t(e);i.filelink&&n.prop("src",i.filelink)},click:function(e){var i=t(this.selection.parent());i.is(".redactor-editor")&&(i=t(this.selection.current())),this.selection.$currentTag=i,this.link.linkDescription="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.is()&&(this.link.linkDescription=this.link.get().prop("title"),this.link.$linkHtml=t(e.target))},modalOpened:function(e,i){var n=this;"link"==e&&(t(i).find("#redactor-link-url-text").closest("section").after('<section><label>Description for Accessibility</label><input value="'+this.link.linkDescription+'" type="text" id="redactor-link-title" placeholder="If blank, will use Text value above" /></section>'),this.link.linkUrlText=t(w).val(),this.link.description=t(_).val(),t(_).off(u),t(w).off(u),t(q).off(h),t(q).on(h,function(){n.link.clickCancel=!0}),t(_).on(u,function(){n.link.valueChanged=!0,n.link.description=r(t(this).val())}),t(w).on(u,function(){n.link.valueChanged=!0,n.link.linkUrlText=r(t(this).val())}))},modalClosed:function(t){var e=this.link.$linkHtml,i=this.link.description;"link"==t&&!this.link.insertedTriggered&&e.length&&this.link.valueChanged&&!this.link.clickCancel&&(i?e.prop("title",i):e.prop("title",this.link.linkUrlText)),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!1,this.link.valueChanged=!1,this.link.clickCancel=!1},insertedLink:function(e){var i=t(e),n=this.link.description;i.prop("title",n?n:i.text()),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!0},fileUpload:function(e,i){t(e).prop("href",i.filelink).html(i.filename)}}},t.extend(i,o.data("redactorSettings")),o.redactor(i)}"string"==typeof e&&t.isFunction(n=s[e])&&n.apply(s)})},t(function(){var e='textarea[data-toggle="qor.redactor"]';t(document).on(c,function(i){a.plugin.call(t(e,i.target),"destroy")}).on(d,function(i){a.plugin.call(t(e,i.target))}).triggerHandler(d)}),a});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.index=0,this.init()}var i="qor.replicator",n="enable."+i,o="disable."+i,s="click."+i,r="added."+i;return e.prototype={constructor:e,init:function(){var e=this,i=this.$element,n=i.find("> .qor-field__block > .qor-fieldset--new"),o=void 0;this.isInSlideout=i.closest(".qor-slideout").length,n.length&&(n.trigger("disable"),this.isMultipleTemplate=i.data("isMultiple"),this.isMultipleTemplate?(this.fieldsetName=[],this.template={},this.index={},n.each(function(i,n){o=t(n).data("fieldsetName"),o&&(e.template[o]=t(n).prop("outerHTML"),e.fieldsetName.push(o))}),this.parseMultiple()):(this.template=n.prop("outerHTML"),this.parse()),n.hide(),this.bind())},parse:function(){var t=void 0;this.template&&(t=this.initTemplate(this.template),this.template=t.template,this.index=t.index)},initTemplate:function(t){var e=void 0;return t=t.replace(/(\w+)\="(\S*\[\d+\]\S*)"/g,function(t,i,n){return n=n.replace(/^(\S*)\[(\d+)\]([^\[\]]*)$/,function(t,o,s,r){if(t===n)return"name"!==i||e||(e=s),o+"[{{index}}]"+r}),i+'="'+n+'"'}),{template:t,index:parseFloat(e)}},parseMultiple:function(){var t=this,e=void 0;this.fieldsetName.forEach(function(i){e=t.initTemplate(t.template[i]),t.template[i]=e.template,t.index[i]=e.index})},bind:function(){var e=this.options;this.$element.on(s,e.addClass,t.proxy(this.add,this)).on(s,e.delClass,t.proxy(this.del,this)),!this.isInSlideout&&t(document).on("submit","form",this.removeData.bind(this)),t(document).on("slideoutBeforeSend.qor.slideout",".qor-slideout",this.removeData.bind(this))},unbind:function(){this.$element.off(s,this.add).off(s,this.del),!this.isInSlideout&&t(document).off("submit","form",this.removeData.bind(this)),t(document).off("slideoutBeforeSend.qor.slideout",".qor-slideout",this.removeData.bind(this))},removeData:function(){this.$element.find(".qor-fieldset--new").remove()},addReplicators:function(t,e){for(var i=0,n=t.length;i<n;i++)this.add(null,e,t[i])},add:function(e,i,n){var o=this.options,s=i?i:t(e.target).closest(o.addClass),a=s.data("template"),l=s.closest(this.$element),d=l.children(o.childrenClass),c=void 0,h=void 0,u=s.closest(o.childrenClass).children("fieldset");if(this.isMultipleTemplate){this.parseNestTemplate(a),h=this.template[a],c=t(h.replace(/\{\{index\}\}/g,this.index[a]));for(var f in s.data())if(f.match(/^sync/)){var p=f.replace(/^sync/,"");c.find("input[name*='."+p+"']").val(s.data(f))}u.length?u.last().after(c.show()):d.prepend(c.show()),c.data("itemIndex",this.index[a]),this.index[a]++}else this.parseNestTemplate(),c=t(this.template.replace(/\{\{index\}\}/g,this.index)),s.before(c.show()),c.data("itemIndex",this.index),this.index++;c.trigger("enable").removeClass("qor-fieldset--new"),t(document).trigger(r,[c,n]),e&&e.stopPropagation()},del:function(e){var i=this.options,n=t(e.target).closest(i.itemClass),o=void 0;n.children(":visible").addClass("hidden").hide(),o=t(i.alertTemplate.replace("{{name}}",this.parseName(n))),o.find(i.undoClass).one(s,function(){n.find("> .qor-fieldset__alert").remove(),n.children(".hidden").removeClass("hidden").show()}),n.append(o)},parseNestTemplate:function(t){var e=this.$element,i=e.parents(".qor-fieldset-container"),n=void 0;i.length&&(n=e.closest(".qor-fieldset").data("itemIndex"),n&&(t?this.template[t]=this.template[t].replace(/\[\d+\]/g,"["+n+"]"):this.template=this.template.replace(/\[\d+\]/g,"["+n+"]")))},parseName:function(t){var e=t.find("input[name]").attr("name");if(e)return e.replace(/[^\[\]]+$/,"")},destroy:function(){this.unbind(),this.$element.removeData(i)}},e.DEFAULTS={itemClass:".qor-fieldset",newClass:".qor-fieldset--new",addClass:".qor-fieldset__add",delClass:".qor-fieldset__delete",childrenClass:".qor-field__block",undoClass:".qor-fieldset__undo",alertTemplate:'<div class="qor-fieldset__alert"><input type="hidden" name="{{name}}._destroy" value="1"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>'},e.plugin=function(n){return this.each(function(){var o=t(this),s=o.data(i),r=void 0;s||o.data(i,s=new e(this,n)),"string"==typeof n&&t.isFunction(r=s[n])&&r.call(s)})},t(function(){var i=".qor-fieldset-container",s={};t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target),s)}).triggerHandler(n)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location,n=window.componentHandler,o=window.history,s="qor.globalSearch",r="enable."+s,a="disable."+s,l="click."+s,d=".qor-global-search--resource",c=".qor-global-search--results",h=".qor-table",u="is-active";return e.prototype={constructor:e,init:function(){this.bind(),this.initTab()},bind:function(){this.$element.on(l,t.proxy(this.click,this))},unbind:function(){this.$element.off(l,this.check)},initTab:function(){var e,n=i.search;/resource_name/.test(n)&&(e=n.match(/resource_name=\w+/g).toString().split("=")[1],t(d).removeClass(u),t('[data-resource="'+e+'"]').addClass(u))},click:function(e){var n=t(e.target),s=n.data();if(n.is(d)){var r,a=i.href.replace(/#/g,""),l=s.resource,c=/resource_name/.test(a),h=/keyword/.test(a),u="resource_name="+l,f=h?"&":"?keyword=&";r=l?c?a.replace(/resource_name=\w+/g,u):a+f+u:a.replace(/&resource_name=\w+/g,""),o.pushState?this.fetchSearch(r,n):i.href=r}},fetchSearch:function(e,i){var s=document.title;t.ajax(e,{method:"GET",dataType:"html",beforeSend:function(){t(".mdl-spinner").remove(),t(c).prepend('<div class="mdl-spinner mdl-js-spinner is-active"></div>').find(".qor-section").hide(),n.upgradeElement(document.querySelector(".mdl-spinner"))},success:function(r){var a=t(r).find(c).html();t(d).removeClass(u),i.addClass(u),o.pushState({Page:e,Title:s},s,e),t(".mdl-spinner").remove(),t(c).removeClass("loading").html(a),n.upgradeElements(document.querySelectorAll(h))},error:function(e,i,n){t(c).find(".qor-section").show(),t(".mdl-spinner").remove(),window.alert([i,n].join(": "))}})},destroy:function(){this.unbind(),this.$element.removeData(s)}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data(s);r||o.data(s,r=new e(this,i)),"string"==typeof i&&t.isFunction(n=r[i])&&n.call(r)})},t(function(){var i='[data-toggle="qor.global.search"]',n={};t(document).on(a,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(r,function(o){e.plugin.call(t(i,o.target),n)}).triggerHandler(r)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.FormData,n="qor.selectcore",o="click."+n,s="submit."+n,r=".qor-table-container tbody tr";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){this.$element.on(o,r,this.processingData.bind(this)).on(s,"form",this.submit.bind(this))},unbind:function(){this.$element.off(o,".qor-table tbody tr",this.processingData.bind(this)).off(s,"form",this.submit.bind(this))},processingData:function(e){var i,n=t(e.target).closest("tr"),o={},s=this.options,r=s.onSelect;return o=t.extend({},o,n.data()),o.$clickElement=n,i=o.mediaLibraryUrl||o.url,i?t.getJSON(i,function(i){i.MediaOption&&(i.MediaOption=JSON.parse(i.MediaOption)),o=t.extend({},i,o),r&&t.isFunction(r)&&r(o,e)}):r&&t.isFunction(r)&&r(o,e),!1},submit:function(e){var n,o=e.target,s=t(o),r=this,a=s.find(":submit"),l=this.options.onSubmit;i&&(e.preventDefault(),t.ajax(s.prop("action"),{method:s.prop("method"),data:new i(o),dataType:"json",processData:!1,contentType:!1,beforeSend:function(){s.parent().find(".qor-error").remove(),a.prop("disabled",!0)},success:function(i){n=i,n.primaryKey=n.ID,t(".qor-error").remove(),l&&t.isFunction(l)?l(n,e):r.refresh()},error:function t(e,i,n){var t=e.responseJSON.errors[0];422===e.status&&t?s.before('<ul class="qor-error"><li><label><i class="material-icons">error</i><span>'+t.Message+"</span></label></li></ul>"):window.alert([i,n].join(": "))},complete:function(){a.prop("disabled",!1)}}))},refresh:function(){setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind()}},e.plugin=function(i){return this.each(function(){var o,s=t(this),r=s.data(n);if(!r){if(/destroy/.test(i))return;s.data(n,r=new e(this,i))}"string"==typeof i&&t.isFunction(o=r[i])&&o.apply(r)})},t.fn.qorSelectCore=e.plugin,e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=t("body"),n=t(document),o=window.Mustache,s="qor.selectone",r="qor.bottomsheets",a="click."+s,l="enable."+s,d="disable."+s,c="reload."+r,h=".qor-selected-many__remove",u=".qor-selected-many__undo",f="qor-selected-many__deleted",p=".qor-field__selected-many",m=".qor-field__selectmany-input",y=".qor-select__select-icon",b=".qor-selectmany__hint",g=".qor-field__selectmany",v=".qor-bottomsheets",_="is_selected",w="qor-bottomsheets__select-many";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){n.on(a,"[data-selectmany-url]",this.openBottomSheets.bind(this)).on(c,"."+w,this.reloadData.bind(this)),this.$element.on(a,h,this.clearSelect.bind(this)).on(a,u,this.undoDelete.bind(this))},unbind:function(){n.off(a,"[data-selectmany-url]",this.openBottomSheets.bind(this)).off(c,"."+w,this.reloadData.bind(this)),this.$element.off(a,h,this.clearSelect.bind(this)).off(a,u,this.undoDelete.bind(this))},clearSelect:function(e){var i=t(e.target),n=i.closest(g);return i.closest("[data-primary-key]").addClass(f),this.updateSelectInputData(n),!1},undoDelete:function(e){var i=t(e.target),n=i.closest(g);return i.closest("[data-primary-key]").removeClass(f),this.updateSelectInputData(n),!1},openBottomSheets:function(e){var n=t(e.target),o=n.data();this.BottomSheets=i.data("qor.bottomsheets"),this.bottomsheetsData=o,this.$selector=o.selectId?t(o.selectId):n.closest(g).find("select"),this.$selectFeild=this.$selector.closest(g).find(p),this.SELECT_MANY_SELECTED_ICON=t('[name="select-many-selected-icon"]').html(),this.SELECT_MANY_UNSELECTED_ICON=t('[name="select-many-unselected-icon"]').html(),this.SELECT_MANY_HINT=t('[name="select-many-hint"]').html(),this.SELECT_MANY_TEMPLATE=t('[name="select-many-template"]').html(),o.url=o.selectmanyUrl,this.BottomSheets.open(o,this.handleSelectMany.bind(this))},reloadData:function(){this.initItems()},renderSelectMany:function(t){return o.render(this.SELECT_MANY_TEMPLATE,t)},renderHint:function(t){return o.render(this.SELECT_MANY_HINT,t)},initItems:function(){var e,i=t(v).find("tbody tr"),n=this.SELECT_MANY_SELECTED_ICON,o=this.SELECT_MANY_UNSELECTED_ICON,s=[],r=this.$selectFeild.find("[data-primary-key]").not("."+f);r.each(function(){s.push(t(this).data().primaryKey)}),i.each(function(){var i=t(this),r=i.find("td:first");e=i.data().primaryKey,"-1"!=s.indexOf(e)?(i.addClass(_),r.append(n)):r.append(o)}),this.updateHint(this.getSelectedItemData())},getSelectedItemData:function(){var t=this.$selectFeild.find("[data-primary-key]").not("."+f);return{selectedNum:t.length}},updateHint:function(e){var i;t.extend(e,this.bottomsheetsData),i=this.renderHint(e),t(b).remove(),t(v).find(".qor-page__body").before(i)},updateSelectInputData:function(i){var n,s,r,a=i?i:this.$selectFeild,l=a.find("[data-primary-key]").not("."+f),d=i?i.find(m):this.$selector,c=d.find("option");c.prop("selected",!1),l.each(function(){r=t(this).data().primaryKey,n=c.filter('[value="'+r+'"]'),n.length||(s={primaryKey:r,displayName:""},n=t(o.render(e.SELECT_MANY_OPTION_TEMPLATE,s)),d.append(n)),n.prop("selected",!0)})},changeIcon:function(t,e){t.find(y).remove(),t.find("td:first").prepend(e)},removeItem:function(t){var e=t.primaryKey;this.$selectFeild.find('[data-primary-key="'+e+'"]').find(h).click(),this.changeIcon(t.$clickElement,this.SELECT_MANY_UNSELECTED_ICON)},addItem:function(i,n){var s,r=this.renderSelectMany(i),a=this.$selectFeild.find('[data-primary-key="'+i.primaryKey+'"]');return a.length?a.hasClass(f)?(a.removeClass(f),this.updateSelectInputData(),void this.changeIcon(i.$clickElement,this.SELECT_MANY_SELECTED_ICON)):void 0:(this.$selectFeild.append(r),n?(s=t(o.render(e.SELECT_MANY_OPTION_TEMPLATE,i)),s.appendTo(this.$selector),s.prop("selected",!0),void this.BottomSheets.hide()):void this.changeIcon(i.$clickElement,this.SELECT_MANY_SELECTED_ICON))},handleSelectMany:function(){var e=t(v),i={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};e.qorSelectCore(i).addClass(w),this.initItems()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t,e){if(t.displayName=t.Text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],e)return void this.addItem(t,!0);var i,n=t.$clickElement;n.toggleClass(_),i=n.hasClass(_),i?this.addItem(t):this.removeItem(t),this.updateHint(this.getSelectedItemData()),this.updateSelectInputData()},destroy:function(){this.unbind(),this.$element.removeData(s)}},e.SELECT_MANY_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ displayName ]]</option>',e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data(s);if(!r){if(/destroy/.test(i))return;o.data(s,r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){var i='[data-toggle="qor.selectmany"]';t(document).on(d,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(l,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(l)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=t("body"),n=t(document),o=window.Mustache,s="qor.selectone",r="qor.bottomsheets",a="click."+s,l="enable."+s,d="disable."+s,c="reload."+r,h=".qor-selected__remove",u=".qor-selected__change",f=".qor-field__selected",p=".qor-field__selectone-input",m=".qor-field__selectone-trigger",y=".qor-field__selectone",b=".qor-bottomsheets",g="is_selected",v="qor-bottomsheets__select-one";return e.prototype={constructor:e,init:function(){this.bind()},bind:function(){n.on(a,"[data-selectone-url]",this.openBottomSheets.bind(this)).on(c,"."+v,this.reloadData.bind(this)),this.$element.on(a,h,this.clearSelect.bind(this)).on(a,u,this.changeSelect)},unbind:function(){n.off(a,"[data-selectone-url]",this.openBottomSheets.bind(this)).off(c,"."+v,this.reloadData.bind(this)),this.$element.off(a,h,this.clearSelect.bind(this)).off(a,u,this.changeSelect)},clearSelect:function(e){var i=t(e.target),n=i.closest(y);return n.find(f).remove(),n.find(p)[0].value="",n.find(m).show(),n.trigger("qor.selectone.unselected"),!1},changeSelect:function(){var e=t(this),i=e.closest(y);i.find(m).trigger("click")},openBottomSheets:function(e){var n=t(e.target),o=n.data();this.BottomSheets=i.data("qor.bottomsheets"),this.bottomsheetsData=o,this.$parent=n.closest(y),o.url=o.selectoneUrl,this.SELECT_ONE_SELECTED_ICON=t('[name="select-one-selected-icon"]').html(),this.BottomSheets.open(o,this.handleSelectOne.bind(this))},initItem:function(){var e,i=this.$parent.find(f);i.length&&(e=i.data().primaryKey,e&&t(b).find('tr[data-primary-key="'+e+'"]').addClass(g).find("td:first").append(this.SELECT_ONE_SELECTED_ICON))},reloadData:function(){this.initItem()},renderSelectOne:function(e){return o.render(t('[name="select-one-selected-template"]').html(),e)},handleSelectOne:function(){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t(b).qorSelectCore(e).addClass(v).data(this.bottomsheetsData),this.initItem()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(i,n){var s,r=this.bottomsheetsData,a=this.$parent,l=r.selectId?t(r.selectId):a.find("select"),d=a.find(f);i.displayName=i.Text||i.Name||i.Title||i.Code||i[Object.keys(i)[0]],l.length&&(l[0].value=i.primaryKey,s=this.renderSelectOne(i),d.length&&d.remove(),a.prepend(s),a.find(m).hide(),n&&(l.append(o.render(e.SELECT_ONE_OPTION_TEMPLATE,i)),l[0].value=i.primaryKey),a.trigger("qor.selectone.selected",[i]),t(b).qorSelectCore("destroy"),this.BottomSheets.hide())},destroy:function(){this.unbind(),this.$element.removeData(s)}},e.SELECT_ONE_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ displayName ]]</option>',e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data(s);if(!r){if(/destroy/.test(i))return;o.data(s,r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){var i='[data-toggle="qor.selectone"]';t(document).on(d,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(l,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(l)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(e,i){this.options=i,this.$element=t(e),this.init()}var i=t(document),n="qor.selector",o="enable."+n,s="disable."+n,r="click."+n,a="selectorChanged."+n,l="open",d="active",c="hover",h="selected",u="disabled",f="clearable",p="."+h,m=".qor-selector-toggle",y=".qor-selector-label",b=".qor-selector-clear",g=".qor-selector-menu",v=".qor-bottomsheets";return e.prototype={constructor:e,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var i=this.$element,n=t(e.TEMPLATE),o=this.options.aligned+"-aligned",s={},r=i.data(),a=r.hover,l=i.attr("name");this.isBottom="bottom"==r.position,a&&n.addClass(c),n.addClass(o).find(g).html(function(){var e=[];return i.children().each(function(){var i=t(this),n=i.attr("selected"),o=i.attr("disabled"),r=i.attr("value"),a=i.text(),d=[];n&&(d.push(h),s.value=r,s.label=a,s.paramName=l),o&&d.push(u),e.push("<li"+(d.length?' class="'+d.join(" ")+'"':"")+' data-value="'+r+'" data-label="'+a+'" data-param-name="'+l+'">'+a+"</li>")}),e.join("")}),this.$selector=n,i.hide().after(n),n.find(m).data("paramName",l),this.pick(s,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(r,t.proxy(this.click,this)),i.on(r,t.proxy(this.close,this))},unbind:function(){this.$selector.off(r,this.click),i.off(r,this.close)},click:function(e){var i=t(e.target);e.stopPropagation(),i.is(b)?this.clear():i.is("li")?(i.hasClass(h)||i.hasClass(u)||this.pick(i.data()),this.close()):i.closest(m).length&&this.open()},pick:function(e,i){var n=this.$selector,o=!!e.value,s=this.$element;n.find(m).toggleClass(d,o).toggleClass(f,o&&this.options.clearable).find(y).text(e.label||this.placeholder),i||(n.find(g).children('[data-value="'+e.value+'"]').addClass(h).siblings(p).removeClass(h),s.val(e.value),s.closest(v).length&&!s.closest('[data-toggle="qor.filter"]').length?t(v).trigger(a,[e.value,e.paramName]):s.trigger("change"))},clear:function(){var t=this.$element;this.$selector.find(m).removeClass(d).removeClass(f).find(y).text(this.placeholder).end().end().find(g).children(p).removeClass(h),t.val("").trigger("change")},open:function(){i.triggerHandler(r),t(".qor-filter__dropdown").hide(),this.$selector.addClass(l),this.isBottom&&this.$selector.addClass("bottom")},close:function(){this.$selector.removeClass(l),this.isBottom&&this.$selector.removeClass("bottom")},destroy:function(){this.unbuild(),this.$element.removeData(n)}},e.DEFAULTS={aligned:"left",clearable:!1},e.TEMPLATE='<div class="qor-selector"><a class="qor-selector-toggle"><span class="qor-selector-label"></span><i class="material-icons qor-selector-arrow">arrow_drop_down</i><i class="material-icons qor-selector-clear">clear</i></a><ul class="qor-selector-menu"></ul></div>',e.plugin=function(i){return this.each(function(){var o,s,r=t(this),a=r.data(n);if(!a){if(/destroy/.test(i))return;o=t.extend({},e.DEFAULTS,r.data(),"object"===("undefined"==typeof i?"undefined":_typeof(i))&&i),r.data(n,a=new e(this,o))}"string"==typeof i&&t.isFunction(s=a[i])&&s.apply(a)})},t(function(){var i='[data-toggle="qor.selector"]';t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(o,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(o)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.slided=!1,this.disabled=!1,this.slideoutType=!1,this.init()}var i=t(document),n=window.FormData,o=window._,s="qor.slideout",r="keyup."+s,a="click."+s,l="submit."+s,d="show."+s,c="slideoutSubmitComplete."+s,h="slideoutClosed."+s,u="slideoutLoaded."+s,f="slideoutBeforeSend."+s,p="shown."+s,m="hide."+s,y="hidden."+s,b="transitionend",g="qor-slideout-open",v="qor-slideout-mini",_="is-shown",w="is-slided",q="is-selected",S=".mdl-layout__content.qor-page",$=".qor-actions__locale",k=".qor-body__loading";
return e.prototype={constructor:e,init:function(){this.build(),this.bind()},build:function(){var i;this.$slideout=i=t(e.TEMPLATE).appendTo("body"),this.$slideoutTemplate=i.html()},unbuild:function(){this.$slideout.remove()},bind:function(){this.$slideout.on(l,"form",t.proxy(this.submit,this)).on(a,'[data-dismiss="slideout"]',t.proxy(this.hide,this)),i.on(r,t.proxy(this.keyup,this))},unbind:function(){this.$slideout.off(l,this.submit),i.off(r,this.keyup).off(a,this.hide)},keyup:function(e){if(27===e.which){if(t(".qor-bottomsheets").is(":visible")||t(".qor-modal").is(":visible")||t("#redactor-modal-box").length)return;this.hide(),this.removeSelectedClass()}},loadScript:function(e,i,n){var o=document.createElement("script");o.src=e,o.onload=function(){var e=t.fn.qorSliderAfterShow;for(var o in e)e.hasOwnProperty(o)&&!e[o].isLoaded&&e[o].call(this,i,n)},document.body.appendChild(o)},loadStyle:function(t){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)},pushArrary:function(e,i){var n=[];return e.each(function(){n.push(t(this).prop(i))}),n},loadExtraResource:function(e,i,n,s){var r=e;r=r.join(""),r=r.replace(/<\s*body/gi,"<div"),r=r.replace(/<\s*\/body/gi,"</div");var a=t(r).prop("class");t("body").addClass(a);var l=i.filter("link"),d=t("link"),c=i.filter("script"),h=t("script"),u=this.pushArrary(l,"href"),f=this.pushArrary(d,"href"),p=this.pushArrary(c,"src"),m=this.pushArrary(h,"src"),y=o.difference(u,f),b=o.difference(p,m),g=y.length,v=b.length;if(1===g)this.loadStyle(y);else if(g>1)for(var _=g-1;_>=0;_--)this.loadStyle(y[_]);if(1===v)this.loadScript(b,n,s);else if(v>1)for(var w=v-1;w>=0;w--)this.loadScript(b[w],n,s)},removeSelectedClass:function(){this.$element.find("[data-url]").removeClass(q)},addLoading:function(){t(k).remove();var i=t(e.TEMPLATE_LOADING);i.appendTo(t("body")).trigger("enable")},submit:function(e){var i=this.$slideout,o=this.$body,s=e.target,r=t(s),a=this,l=r.find(":submit");i.trigger(f),n&&(e.preventDefault(),t.ajax(r.prop("action"),{method:r.prop("method"),data:new n(s),dataType:"html",processData:!1,contentType:!1,beforeSend:function(){l.prop("disabled",!0),t.fn.qorSlideoutBeforeHide=null},success:function(e){var n=r.data("returnUrl"),o=r.data("refreshUrl");if(i.trigger(c),o)return void(window.location.href=o);if("refresh"==n)return void a.refresh();if(n&&"refresh"!=n)a.load(n);else{var s="/"+location.pathname.split("/")[1],l=[];t(e).find(".qor-alert").each(function(e,i){var n=t(i).find(".qor-alert-message").text().trim(),o=t(i).data("type");""!==n&&l.push({Type:o,Message:n,Keep:!0})}),l.length>0&&(document.cookie="qor-flashes="+btoa(unescape(encodeURIComponent(JSON.stringify(l))))+"; path="+s),a.refresh()}},error:function(e,n,s){var a;422===e.status?(o.find(".qor-error").remove(),r.find(".qor-field").removeClass("is-error").find(".qor-field__error").remove(),a=t(e.responseText).find(".qor-error"),r.before(a),a.find("> li > label").each(function(){var e=t(this),i=e.attr("for");i&&r.find("#"+i).closest(".qor-field").addClass("is-error").append(e.clone().addClass("qor-field__error"))}),i.scrollTop(0)):window.alert([n,s].join(": "))},complete:function(){l.prop("disabled",!1)}}))},load:function e(i,n){var o,s,e,r,a=this.options,l=this.$slideout;i&&(n=t.isPlainObject(n)?n:{},o=n.method?n.method:"GET",s=n.datatype?n.datatype:"html",e=t.proxy(function(){t.ajax(i,{method:o,dataType:s,success:t.proxy(function(e){var s,d,c;if(t(k).remove(),"GET"===o){if(s=t(e),d=s.find(S),c=d.find(".qor-form-container"),this.slideoutType=c.length&&c.data().slideoutType,!d.length)return;var h=e.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi);h&&this.loadExtraResource(h,s,i,e),d.find(".qor-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),l.html(this.$slideoutTemplate),r=l.find(".qor-slideout__title"),this.$body=l.find(".qor-slideout__body"),r.html(s.find(a.title).html()),this.$body.html(d.html()),this.$body.find($).remove(),l.one(p,function(){t(this).trigger("enable")}).one(y,function(){t(this).trigger("disable")}),this.show();var f=t.fn.qorSliderAfterShow;if(f)for(var m in f)f.hasOwnProperty(m)&&t.isFunction(f[m])&&(f[m].isLoaded=!0,f[m].call(this,i,e));l.trigger(u,[i,e])}else n.returnUrl?this.load(n.returnUrl):this.refresh()},this),error:t.proxy(function(){var e;t(k).remove(),e=t(".qor-error span").length>0?t(".qor-error span").map(function(){return t(this).text()}).get().join(", "):"Server error, please try again later!",window.alert(e)},this)})},this),this.slided?(this.hide(),this.$slideout.one(y,e)):e())},open:function(t){this.addLoading(),this.load(t.url,t.data)},show:function(){var e,i=this.$slideout;this.slided||(e=t.Event(d),i.trigger(e),e.isDefaultPrevented()||(i.removeClass(v),"mini"==this.slideoutType&&i.addClass(v),i.addClass(_).get(0).offsetWidth,i.one(b,t.proxy(this.shown,this)).addClass(w).scrollTop(0)))},shown:function(){this.slided=!0,t("body").addClass(g),this.$slideout.trigger(p)},hide:function(){t.fn.qorSlideoutBeforeHide?window.confirm("You have unsaved changes on this slideout. If you close this slideout, you will lose all unsaved changes!")&&this.hideSlideout():this.hideSlideout(),this.removeSelectedClass()},hideSlideout:function(){var e,i=this.$slideout,n=t(".qor-datepicker").not(".hidden");window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null,n.length&&n.addClass("hidden"),this.slided&&(e=t.Event(m),i.trigger(e),e.isDefaultPrevented()||(i.one(b,t.proxy(this.hidden,this)).removeClass(w),i.trigger(h)))},hidden:function(){this.slided=!1,t("body").removeClass(g),this.$slideout.removeClass(_).trigger(y)},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(s)}},e.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},e.TEMPLATE='<div class="qor-slideout">\n            <div class="qor-slideout__header">\n            <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__close" data-dismiss="slideout">\n                <span class="material-icons">close</span>\n            </button>\n                <h3 class="qor-slideout__title"></h3>\n            </div>\n            <div class="qor-slideout__body"></div>\n        </div>',e.TEMPLATE_LOADING='<div class="qor-body__loading">\n            <div><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>\n        </div>',e.plugin=function(i){return this.each(function(){var n,o=t(this),r=o.data(s);if(!r){if(/destroy/.test(i))return;o.data(s,r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t.fn.qorSlideout=e.plugin,e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location,n="qor.sorter",o="enable."+n,s="disable."+n,r="click."+n,a="is-sortable";return e.prototype={constructor:e,init:function(){this.$element.addClass(a),this.bind()},bind:function(){this.$element.on(r,"> thead > tr > th",t.proxy(this.sort,this))},unbind:function(){this.$element.off(r,this.sort)},sort:function(e){var n=t(e.currentTarget),o=n.data("orderBy"),s=i.search,r="order_by="+o;o&&(/order_by/.test(s)?s=s.replace(/order_by(=\w+)?/,function(){return r}):s+=s.indexOf("?")>-1?"&"+r:r,i.search=s)},destroy:function(){this.unbind(),this.$element.removeClass(a).removeData(n)}},e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var o,s=t(this),r=s.data(n);if(!r){if(/destroy/.test(i))return;s.data(n,r=new e(this,i))}"string"==typeof i&&t.isFunction(o=r[i])&&o.apply(r)})},t(function(){var i=".qor-js-table";t(document).on(s,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(o,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(o)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window._,n=t("body"),o="qor.tabbar",s="enable."+o,r="disable."+o,a="click."+o,l=".qor-layout__tab-button",d=".qor-layout__tab-content",c=".mdl-layout__tab-bar-container",h=".qor-layout__tab-right",u=".qor-layout__tab-left",f="is-active";return e.prototype={constructor:e,init:function(){this.initTab(),this.bind()},bind:function(){this.$element.on(a,l,this.switchTab.bind(this)),this.$element.on(a,h,this.scrollTabRight.bind(this)),this.$element.on(a,u,this.scrollTabLeft.bind(this))},unbind:function(){this.$element.off(a,l,this.switchTab),this.$element.off(a,h,this.scrollTabRight),this.$element.off(a,u,this.scrollTabLeft)},initTab:function(){var o=this.$element.data();o.scopeActive?n.data("tabScopeActive",o.scopeActive):(t(l).first().addClass(f),n.data("tabScopeActive",t(l).first().data("name"))),this.tabWidth=0,this.slideoutWidth=t(d).outerWidth(),i.each(t(l),function(e){this.tabWidth=this.tabWidth+t(e).outerWidth()}.bind(this)),this.tabWidth>this.slideoutWidth&&this.$element.find(c).append(e.ARROW_RIGHT)},scrollTabLeft:function(e){e.stopPropagation();var i=t(c),n=i.scrollLeft(),o=n-this.slideoutWidth;n>0&&i.animate({scrollLeft:o},400,function(){t(h).show(),0==i.scrollLeft()&&t(u).hide()})},scrollTabRight:function(i){i.stopPropagation();var n=t(c),o=n.scrollLeft(),s=this.tabWidth,r=this.slideoutWidth,a=o+r;a<s&&(n.animate({scrollLeft:a},400,function(){t(u).show(),n.scrollLeft()+r>=s&&t(h).hide()}),!t(u).length&&this.$element.find(c).prepend(e.ARROW_LEFT))},switchTab:function(e){var i=t(e.target),o=this.$element,s=i.data(),r=n.data().tabScopeActive,a=t(".qor-slideout").is(":visible");if(a)return!i.hasClass(f)&&(o.find(l).removeClass(f),i.addClass(f),t.ajax(s.tabUrl,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){t(".qor-layout__tab-spinner").remove();var e='<div class="mdl-spinner mdl-js-spinner is-active qor-layout__tab-spinner"></div>';t(d).hide().before(e),window.componentHandler.upgradeElement(t(".qor-layout__tab-spinner")[0])},success:function(e){t(".qor-layout__tab-spinner").remove(),n.data("tabScopeActive",i.data("name"));var o=t(e).find(d).html();t(d).show().html(o).trigger("enable")},error:function(){t(".qor-layout__tab-spinner").remove(),n.data("tabScopeActive",r)}}),!1)},destroy:function(){this.unbind(),n.removeData("tabScopeActive")}},e.ARROW_RIGHT='<a href="javascript://" class="qor-layout__tab-right"></a>',e.ARROW_LEFT='<a href="javascript://" class="qor-layout__tab-left"></a>',e.DEFAULTS={},e.plugin=function(i){return this.each(function(){var n,s=t(this),r=s.data(o);if(!r){if(/destroy/.test(i))return;s.data(o,r=new e(this,i))}"string"==typeof i&&t.isFunction(n=r[i])&&n.apply(r)})},t(function(){var i='[data-toggle="qor.tab"]';t(document).on(r,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(s,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(s)}),e});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend(!0,{},e.DEFAULTS,t.isPlainObject(n)&&n),this.formatDate=null,this.pickerData=this.$element.data(),this.targetInputClass=this.pickerData.targetInput,this.parent=this.$element.closest(c),this.isDateTimePicker=this.targetInputClass&&this.parent.length,this.$targetInput=this.parent.find(this.targetInputClass),this.init()}var i="qor.timepicker",n="enable."+i,o="disable."+i,s="click."+i,r="focus."+i,a="keydown."+i,l="blur."+i,d="selectTime."+i,c=".qor-field__datetimepicker",h=".ui-timepicker-selected";return e.prototype={init:function(){this.bind(),this.oldValue=this.$targetInput.val();var t=new Date,e=t.getMonth()+1,i=t.getDate();e=e<8?"0"+e:e,i=i<10?"0"+i:i,this.dateValueNow=t.getFullYear()+"-"+e+"-"+i},bind:function(){var e={timeFormat:"H:i",showOn:null,wrapHours:!1,scrollDefault:"now"};this.isDateTimePicker&&this.$targetInput.timepicker(e).on(d,t.proxy(this.changeTime,this)).on(l,t.proxy(this.blur,this)).on(r,t.proxy(this.focus,this)).on(a,t.proxy(this.keydown,this)),this.$element.on(s,t.proxy(this.show,this))},unbind:function(){this.$element.off(s,this.show),this.isDateTimePicker&&this.$targetInput.off(d,this.changeTime).off(l,this.blur).off(r,this.focus).off(a,this.keydown)},focus:function(){},blur:function(){var t,e,i,n,o,s,r=this.$targetInput.val(),a=r.split(" "),l=a.length,d=/\d{1,2}:\d{1,2}/,c=/^\d{4}-\d{1,2}-\d{1,2}/;if(r){if(1==l)c.test(a[0])&&(e=a[0],i="00:00"),d.test(a[0])&&(e=this.dateValueNow,i=a[0]);else for(var h=0;h<l;h++){n=c.test(a[h]),o=d.test(a[h]),n&&(e=a[h],s="-"),o&&(i=a[h],s=":"),t=a[h].split(s);for(var u=0;u<t.length;u++)t[u].length<2&&(t[u]="0"+t[u]);n&&(e=t.join(s)),o&&(i=t.join(s))}this.checkDate(e)&&this.checkTime(i)?(this.$targetInput.val(e+" "+i),this.oldValue=this.$targetInput.val()):this.$targetInput.val(this.oldValue)}},keydown:function(t){var e=t.keyCode,i=[48,49,50,51,52,53,54,55,56,57,8,37,38,39,40,27,32,20,189,16,186,96,97,98,99,100,101,102,103,104,105];i.indexOf(e)==-1&&t.preventDefault()},checkDate:function(t){var e=/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{1,2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/;return e.test(t)},checkTime:function(t){var e=/^([01]\d|2[0-3]):?([0-5]\d)$/;return e.test(t)},changeTime:function(){var t,e=this.$targetInput,i=this.oldValue,n=/\d{1,2}:\d{1,2}/,o=n.test(i),s=e.data().timepickerList.find(h).html();t=i?o?i.replace(n,s):i+" "+s:this.dateValueNow+" "+s,e.val(t)},show:function(){this.isDateTimePicker&&(this.$targetInput.timepicker("show"),this.oldValue=this.$targetInput.val())},destroy:function(){this.unbind(),this.$targetInput.timepicker("remove"),this.$element.removeData(i)}},e.DEFAULTS={},e.plugin=function(n){return this.each(function(){var o,s,r=t(this),a=r.data(i);if(!a){if(!t.fn.datepicker)return;if(/destroy/.test(n))return;o=t.extend(!0,{},r.data(),"object"===("undefined"==typeof n?"undefined":_typeof(n))&&n),r.data(i,a=new e(this,o))}"string"==typeof n&&t.isFunction(s=a[n])&&s.apply(a)})},t(function(){var i='[data-toggle="qor.timepicker"]';t(document).on(o,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(n,function(n){e.plugin.call(t(i,n.target))}).triggerHandler(n)}),e});